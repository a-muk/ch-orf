<StructureMap xmlns="http://hl7.org/fhir">
   <id value="OrfBundleToQr"></id>
   <text>
      <status value="generated"></status>
      <div xmlns="http://www.w3.org/1999/xhtml">
         <pre>map "http://fhir.ch/ig/ch-orf/StructureMap/OrfBundleToQr" = "OrfBundleToQr"

// ORF Bundle To QuestionnaireResonse
// 2021-03-23 Oliver Egger, copyright ahdis ag, Apache License
// Bundle: http://build.fhir.org/ig/hl7ch/ch-orf/StructureDefinition-ch-orf-document.html
// QRF Questionnaire Response: http://build.fhir.org/ig/hl7ch/ch-orf/QuestionnaireResponse-referral-min.xml.html

uses "http://hl7.org/fhir/StructureDefinition/Bundle" alias Bundle as source
uses "http://hl7.org/fhir/StructureDefinition/Composition" alias Composition as source
uses "http://hl7.org/fhir/StructureDefinition/Patient" alias Patient as source
uses "http://hl7.org/fhir/StructureDefinition/Organization" alias Organization as source
uses "http://hl7.org/fhir/StructureDefinition/Practitioner" alias Practitioner as source
uses "http://hl7.org/fhir/StructureDefinition/PractitionerRole" alias PractitionerRole as source
uses "http://hl7.org/fhir/StructureDefinition/ServiceRequest" alias ServiceRequest as source
uses "http://hl7.org/fhir/StructureDefinition/BackboneElement" alias BackboneElement as source
uses "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse" alias QuestionnaireResponse as target

group OrfBundleToQr(source bundle : Bundle, target qr : QuestionnaireResponse) {
  bundle -&gt; qr.questionnaire = 'http://fhir.ch/ig/ch-orf/Questionnaire/order-referral-form' "questionnaire";
  bundle -&gt; qr.status = 'completed' "status";
  bundle.entry first as entry then {
    entry.resource as composition then {
      composition.section as section then {
        bundle.entry as entry then {
          entry.fullUrl where ($this in %section.entry.reference) and $this.startsWith('urn:uuid') then {
            entry.resource : ServiceRequest as serviceRequest then CompositionToQr(bundle, composition, serviceRequest, qr) "servicerequest";
          } "fullUrlAsUuid";
          entry.resource : ServiceRequest as serviceRequest where ('ServiceRequest' + '/' + $this.id) in %section.entry.reference then CompositionToQr(bundle, composition, serviceRequest, qr) "servicerequest";
        };
      };
    };
  };
}

group CompositionToQr(source bundle : Bundle, source composition : Composition, source serviceRequest : ServiceRequest, target qr : QuestionnaireResponse) {
  composition -&gt;  qr.item as item,  item.linkId = 'order' then OrderToQr(bundle, composition, serviceRequest, item) "order";
  serviceRequest.performer -&gt;  qr.item as item,  item.linkId = 'receiver' then ReceiverToQr(bundle, composition, serviceRequest, item) "receiver";
  composition.subject -&gt;  qr.item as item,  item.linkId = 'patient' then PatientToQr(bundle, composition, serviceRequest, item) "patient";
  composition.author -&gt;  qr.item as item,  item.linkId = 'sender' then SenderToQr(bundle, composition, serviceRequest, item) "sender";
  composition.extension first as extension where (url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-copyreceiver') -&gt;  qr.item as item,  item.linkId = 'receiverCopies' then ReceiverCopyToQr(bundle, composition, serviceRequest, item) "receiverCopies";
}

group OrderToQr(source bundle : Bundle, source composition : Composition, source serviceRequest : ServiceRequest, target item : BackboneElement) {
  // &lt;linkId value="order.placerOrderIdentifierDomain" /&gt;
  serviceRequest.identifier as identifier where (type.coding.where((system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203') and (code.value = 'PLAC'))) -&gt;  item.item as itemfirst,  itemfirst.linkId = 'order.placerOrderIdentifier',  itemfirst.answer as answer,  answer.value = (identifier.value) then {
    identifier.system as system -&gt;  item.item as itemsecond,  itemsecond.linkId = 'order.placerOrderIdentifierDomain',  itemsecond.answer as answer,  answer.value = cast(system, 'string') "placerOrderIdentifierDomain";
  } "placerOrderIdentifierDomain";
  // &lt;linkId value="order.fillerOrderIdentifier" /&gt;
  serviceRequest.identifier as identifier where (type.coding.where((system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203') and (code.value = 'FILL'))) -&gt;  item.item as itemfirst,  itemfirst.linkId = 'order.fillerOrderIdentifier',  itemfirst.answer as answer,  answer.value = (identifier.value) then {
    identifier.system as system -&gt;  item.item as itemsecond,  itemsecond.linkId = 'order.fillerOrderIdentifierDomain',  itemsecond.answer as answer,  answer.value = cast(system, 'string') "fillerOrderIdentifier";
  } "fillerOrderIdentifierDomain";
  // &lt;linkId value="order.precedentDocumentIdentifier" /&gt;
  composition.extension as extension where url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-precedentdocument' then {
    extension.value as value -&gt;  item.item as item,  item.linkId = 'order.precedentDocumentIdentifier',  item.answer as answer,  answer.value = (value.value) "precedentDocumentIdentifier";
  } "composition";
  // 'order.dateTime'- currently not mapped in qr response
  composition.extension as extension where url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-urgentnoficationcontactforthisdocument' then {
    extension.value as value then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %value.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : PractitionerRole as practitionerRole then UrgentNotificationToQr(bundle, composition, practitionerRole, item) "practitionerRole";
        } "fullUrlAsUuid";
        entry.resource : PractitionerRole as practitionerRole where ('PractitionerRole' + '/' + $this.id) in %value.reference then UrgentNotificationToQr(bundle, composition, practitionerRole, item) "practitionerRole";
      };
    };
  } "composition";
  // Urgent Notification Contact for the Response to this document
  composition.extension as extension where url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-urgentnoficationcontactfortheresponsetothisdocument' then {
    extension.value as value then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %value.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : PractitionerRole as practitionerRole then UrgentNotificationResponseToQr(bundle, composition, practitionerRole, item) "practitionerRole";
        } "fullUrlAsUuid";
        entry.resource : PractitionerRole as practitionerRole where ('PractitionerRole' + '/' + $this.id) in %value.reference then UrgentNotificationResponseToQr(bundle, composition, practitionerRole, item) "practitionerRole";
      };
    };
  } "composition";
  // order.priority
  serviceRequest.priority as priority -&gt;  item.item as item,  item.linkId = 'order.priority',  item.answer as answer,  answer.value = create('Coding') as coding,  coding.system = 'http://hl7.org/fhir/request-priority',  coding.code = priority;
}

group UrgentNotificationToQr(source bundle : Bundle, source composition : Composition, source practitionerRole : PractitionerRole, target item : BackboneElement) {
  composition -&gt;  item.item as itemgroup,  itemgroup.linkId = 'order.notificationContactDocument',  itemgroup.item as item,  item.linkId = 'order.notificationContactDocument.practitioner' then {
    practitionerRole.practitioner as practitioner then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %practitioner.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : Practitioner as practitioner then UrgentNotificationPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
        } "fullUrlAsUuid";
        entry.resource : Practitioner as practitioner where ('Practitioner' + '/' + $this.id) in %practitioner.reference then UrgentNotificationPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
      };
    };
  } "urgentnotification";
}

group UrgentNotificationPractitionerToQr(source bundle : Bundle, source composition : Composition, source practitioner : Practitioner, target item : BackboneElement) {
  practitioner.name as name then {
    // order.notificationContactDocument.practitioner.title
    name.prefix as prefix where (extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC'))) -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocument.practitioner.title',  item.answer as answer,  answer.value = prefix;
    // order.notificationContactDocument.practitioner.familyName
    name.family as family -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocument.practitioner.familyName',  item.answer as answer,  answer.value = family;
    // order.notificationContactDocument.practitioner.givenName
    name.given as given -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocument.practitioner.givenName',  item.answer as answer,  answer.value = given;
  };
  // order.notificationContactDocument.practitioner.phone
  practitioner.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocument.practitioner.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
  // order.notificationContactDocument.practitioner.memaol
  practitioner.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocument.practitioner.email',  item.answer as answer,  answer.value = (telecom.value) "email";
}

group UrgentNotificationResponseToQr(source bundle : Bundle, source composition : Composition, source practitionerRole : PractitionerRole, target item : BackboneElement) {
  // order.notificationContactDocumentResponse
  composition -&gt;  item.item as itemgroup,  itemgroup.linkId = 'order.notificationContactDocumentResponse',  itemgroup.item as item,  item.linkId = 'order.notificationContactDocumentResponse.practitioner' then {
    practitionerRole.practitioner as practitioner then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %practitioner.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : Practitioner as practitioner then UrgentNotificationResponsePractitionerToQr(bundle, composition, practitioner, item) "practitioner";
        } "fullUrlAsUuid";
        entry.resource : Practitioner as practitioner where ('Practitioner' + '/' + $this.id) in %practitioner.reference then UrgentNotificationResponsePractitionerToQr(bundle, composition, practitioner, item) "practitioner";
      };
    };
  } "urgentnotification";
}

group UrgentNotificationResponsePractitionerToQr(source bundle : Bundle, source composition : Composition, source practitioner : Practitioner, target item : BackboneElement) {
  practitioner.name as name then {
    // order.notificationContactDocumentResponse.practitioner.title
    name.prefix as prefix where (extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC'))) -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocumentResponse.practitioner.title',  item.answer as answer,  answer.value = prefix;
    // order.notificationContactDocumentResponse.practitioner.familyName
    name.family as family -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocumentResponse.practitioner.familyName',  item.answer as answer,  answer.value = family;
    // order.notificationContactDocumentResponse.practitioner.givenName
    name.given as given -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocumentResponse.practitioner.givenName',  item.answer as answer,  answer.value = given;
  };
  // order.notificationContactDocumentResponse.practitioner.phone
  practitioner.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocumentResponse.practitioner.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
  // order.notificationContactDocumentResponse.practitioner.memaol
  practitioner.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'order.notificationContactDocumentResponse.practitioner.email',  item.answer as answer,  answer.value = (telecom.value) "email";
}

group ReceiverToQr(source bundle : Bundle, source composition : Composition, source serviceRequest : ServiceRequest, target item : BackboneElement) {
  serviceRequest.performer as performer then {
    bundle.entry as entry then {
      entry.fullUrl where ($this in %performer.reference) and $this.startsWith('urn:uuid') then {
        entry.resource : PractitionerRole as practitionerRole then ReceiverPractitionerRoleToQr(bundle, composition, practitionerRole, item) "practitioner";
      } "fullUrlAsUuid";
      entry.resource : PractitionerRoler as practitionerRole where ('PractitionerRole' + '/' + $this.id) in %performer.reference then ReceiverPractitionerRoleToQr(bundle, composition, practitionerRole, item) "practitioner";
    };
  } "practitioner";
}

group ReceiverPractitionerRoleToQr(source bundle : Bundle, source composition : Composition, source practitionerRole : PractitionerRole, target itemgroup : BackboneElement) {
  practitionerRole.practitioner as practitioner -&gt;  itemgroup.item as item,  item.linkId = 'receiver.practitioner' then {
    bundle.entry as entry then {
      entry.fullUrl where ($this in %practitioner.reference) and $this.startsWith('urn:uuid') then {
        entry.resource : Practitioner as practitioner then ReceiverPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
      } "fullUrlAsUuid";
      entry.resource : Practitioner as practitioner where ('Practitioner' + '/' + $this.id) in %practitioner.reference then ReceiverPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
    };
  };
  practitionerRole.organization as organization -&gt;  itemgroup.item as item,  item.linkId = 'receiver.organization' then {
    bundle.entry as entry then {
      entry.fullUrl where ($this in %organization.reference) and $this.startsWith('urn:uuid') then {
        entry.resource : Organization as organization then ReceiverOrganizationToQr(bundle, composition, organization, item) "organization";
      } "fullUrlAsUuid";
      entry.resource : Organization as organization where ('Organization' + '/' + $this.id) in %organization.reference then ReceiverOrganizationToQr(bundle, composition, practitioner, item) "organization";
    };
  };
}

group ReceiverPractitionerToQr(source bundle : Bundle, source composition : Composition, source practitioner : Practitioner, target item : BackboneElement) {
  practitioner.name as name then {
    // receiver.practitioner.title
    name.prefix as prefix where (extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC'))) -&gt;  item.item as item,  item.linkId = 'receiver.practitioner.title',  item.answer as answer,  answer.value = prefix;
    // receiver.practitioner.familyName
    name.family as family -&gt;  item.item as item,  item.linkId = 'receiver.practitioner.familyName',  item.answer as answer,  answer.value = family;
    // receiver.practitioner.givenName
    name.given as given -&gt;  item.item as item,  item.linkId = 'receiver.practitioner.givenName',  item.answer as answer,  answer.value = given;
  };
  // receiver.practitioner.gln
  practitioner.identifier as identifier where (system = 'urn:oid:2.51.1.3') then {
    identifier.value as value -&gt;  item.item as item,  item.linkId = 'receiver.practitioner.gln',  item.answer as answer,  answer.value = cast(value, 'string') "gln";
  };
  // receiver.practitioner.phone
  practitioner.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'receiver.practitioner.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
  // receiver.practitioneremail
  practitioner.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'receiver.practitioner.email',  item.answer as answer,  answer.value = (telecom.value) "email";
}

group ReceiverOrganizationToQr(source bundle : Bundle, source composition : Composition, source organization : Organization, target item : BackboneElement) {
  // receiver.organization.name
  organization.name as name -&gt;  item.item as item,  item.linkId = 'receiver.organization.name',  item.answer as answer,  answer.value = name;
  // receiver.organization.streetAddressLine
  organization.address as addr then {
    addr.line first as line1 -&gt;  item.item as item,  item.linkId = 'receiver.organization.streetAddressLine' then {
      addr.line as line -&gt;  item.answer as answer,  answer.value = line;
    } "addrlinefirst";
    // receiver.organization.postalCode
    addr.postalCode as postalCode -&gt;  item.item as item,  item.linkId = 'receiver.organization.postalCode',  item.answer as answer,  answer.value = postalCode;
    // receiver.organization.city
    addr.city as city -&gt;  item.item as item,  item.linkId = 'receiver.organization.city',  item.answer as answer,  answer.value = city;
    // receiver.organization.country
    addr.country as country -&gt;  item.item as item,  item.linkId = 'receiver.organization.country',  item.answer as answer,  answer.value = country;
  } "addr";
}

group PatientToQr(source bundle : Bundle, source composition : Composition, source serviceRequest : ServiceRequest, target item : BackboneElement) {
  composition.subject as subject then {
    bundle.entry as entry then {
      entry.fullUrl where ($this in %subject.reference) and $this.startsWith('urn:uuid') then {
        entry.resource : Patient as patient then PatientDetailsToQr(bundle, composition, patient, item) "patient";
      } "fullUrlAsUuid";
      entry.resource : Patient as patient where ('Patient' + '/' + $this.id) in %subject.reference then PatientDetailsToQr(bundle, composition, patient, item) "patient";
    };
  } "practitioner";
}

group PatientDetailsToQr(source bundle : Bundle, source composition : Composition, source patient : Patient, target item : BackboneElement) {
  // patient.familyName
  patient.name as name then {
    name.family as family -&gt;  item.item as item,  item.linkId = 'patient.familyName',  item.answer as answer,  answer.value = family;
    // patient.givenName
    name.given as given -&gt;  item.item as item,  item.linkId = 'patient.givenName',  item.answer as answer,  answer.value = given;
  };
  // patient.localPid
  patient.identifier as identifier where (type.coding.where((system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203') and (code.value = 'MR'))) -&gt;  item.item as item,  item.linkId = 'patient.localPid',  item.answer as answer,  answer.value = (identifier.value) then {
    identifier.system as system -&gt;  item.item as item,  item.linkId = 'patient.localPidDomain',  item.answer as answer,  answer.value = cast(system, 'string') "placerOrderIdentifierDomain";
  } "localPid";
  // patient.birthDate
  patient.birthDate as birthDate -&gt;  item.item as item,  item.linkId = 'patient.birthDate',  item.answer as answer,  answer.value = birthDate;
  // patient.gender
  patient.gender as gender -&gt;  item.item as item,  item.linkId = 'patient.gender',  item.answer as answer,  answer.value = create('Coding') as coding,  coding.system = 'http://hl7.org/fhir/administrative-gender',  coding.code = gender;
  // patient.phone
  patient.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'patient.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
  // patient.email
  patient.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'patient.email',  item.answer as answer,  answer.value = (telecom.value) "email";
  patient.address as addr then {
    addr.line first as line1 -&gt;  item.item as item,  item.linkId = 'patient.streetAddressLine' then {
      addr.line as line -&gt;  item.answer as answer,  answer.value = line;
    } "addrlinefirst";
    // patient.postalCode
    addr.postalCode as postalCode -&gt;  item.item as item,  item.linkId = 'patient.postalCode',  item.answer as answer,  answer.value = postalCode;
    // patient.city
    addr.city as city -&gt;  item.item as item,  item.linkId = 'patient.city',  item.answer as answer,  answer.value = city;
    // patient.country
    addr.country as country -&gt;  item.item as item,  item.linkId = 'patient.country',  item.answer as answer,  answer.value = country;
  } "addr";
}

group SenderToQr(source bundle : Bundle, source composition : Composition, source serviceRequest : ServiceRequest, target item : BackboneElement) {
  composition.author as author then {
    bundle.entry as entry then {
      entry.fullUrl where ($this in %author.reference) and $this.startsWith('urn:uuid') then {
        entry.resource : PractitionerRole as practitionerRole then SenderPractitionerRoleToQr(bundle, composition, practitionerRole, item) "practitioner";
      } "fullUrlAsUuid";
      entry.resource : PractitionerRoler as practitionerRole where ('PractitionerRole' + '/' + $this.id) in %author.reference then SenderPractitionerRoleToQr(bundle, composition, practitionerRole, item) "practitioner";
    };
  };
  composition.extension as ext where (url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer') then {
    ext.extension as extension where (url = 'enterer') then {
      extension.value as value then {
        bundle.entry as entry then {
          entry.fullUrl where ($this in %value.reference) and $this.startsWith('urn:uuid') then {
            entry.resource : PractitionerRole as practitionerRole then DataEntererPractitionerRoleToQr(bundle, composition, practitionerRole, item) "practitionerRole";
          } "fullUrlAsUuid";
          entry.resource : PractitionerRole as practitionerRole where ('PractitionerRole' + '/' + $this.id) in %value.reference then DataEntererPractitionerRoleToQr(bundle, composition, practitionerRole, item) "practitionerRole";
        };
      };
    } "enterer";
  } "dataenterer";
}

group SenderPractitionerRoleToQr(source bundle : Bundle, source composition : Composition, source practitionerRole : PractitionerRole, target itemsender : BackboneElement) {
  composition -&gt;  itemsender.item as itemgroup,  itemgroup.linkId = 'sender.author' then {
    practitionerRole.practitioner as practitioner -&gt;  itemgroup.item as item,  item.linkId = 'sender.author.practitioner' then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %practitioner.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : Practitioner as practitioner then SenderPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
        } "fullUrlAsUuid";
        entry.resource : Practitioner as practitioner where ('Practitioner' + '/' + $this.id) in %practitioner.reference then SenderPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
      };
    };
    practitionerRole.organization as organization -&gt;  itemgroup.item as item,  item.linkId = 'sender.author.organization' then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %organization.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : Organization as organization then SenderOrganizationToQr(bundle, composition, organization, item) "organization";
        } "fullUrlAsUuid";
        entry.resource : Organization as organization where ('Organization' + '/' + $this.id) in %organization.reference then SenderOrganizationToQr(bundle, composition, practitioner, item) "organization";
      };
    };
  } "author";
}

group SenderPractitionerToQr(source bundle : Bundle, source composition : Composition, source practitioner : Practitioner, target item : BackboneElement) {
  practitioner.name as name then {
    // sender.author.practitioner.title
    name.prefix as prefix where (extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC'))) -&gt;  item.item as item,  item.linkId = 'sender.author.practitioner.title',  item.answer as answer,  answer.value = prefix;
    // sender.author.practitioner.familyName
    name.family as family -&gt;  item.item as item,  item.linkId = 'sender.author.practitioner.familyName',  item.answer as answer,  answer.value = family;
    // sender.author.practitioner.givenName
    name.given as given -&gt;  item.item as item,  item.linkId = 'sender.author.practitioner.givenName',  item.answer as answer,  answer.value = given;
  };
  // sender.author.practitioner.gln
  practitioner.identifier as identifier where (system = 'urn:oid:2.51.1.3') then {
    identifier.value as value -&gt;  item.item as item,  item.linkId = 'sender.author.practitioner.gln',  item.answer as answer,  answer.value = cast(value, 'string') "gln";
  };
  // sender.author.practitioner.phone
  practitioner.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'sender.author.practitioner.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
  // sender.author.practitioneremila
  practitioner.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'sender.author.practitioner.email',  item.answer as answer,  answer.value = (telecom.value) "email";
}

group SenderOrganizationToQr(source bundle : Bundle, source composition : Composition, source organization : Organization, target item : BackboneElement) {
  // sender.author.organization.name
  organization.name as name -&gt;  item.item as item,  item.linkId = 'sender.author.organization.name',  item.answer as answer,  answer.value = name;
  // sender.author.organization.streetAddressLine
  organization.address as addr then {
    addr.line first as line1 -&gt;  item.item as item,  item.linkId = 'sender.author.organization.streetAddressLine' then {
      addr.line as line -&gt;  item.answer as answer,  answer.value = line;
    } "addrlinefirst";
    // sender.author.organization.postalCode
    addr.postalCode as postalCode -&gt;  item.item as item,  item.linkId = 'sender.author.organization.postalCode',  item.answer as answer,  answer.value = postalCode;
    // sender.author.organization.city
    addr.city as city -&gt;  item.item as item,  item.linkId = 'sender.author.organization.city',  item.answer as answer,  answer.value = city;
    // sender.author.organization.country
    addr.country as country -&gt;  item.item as item,  item.linkId = 'sender.author.organization.country',  item.answer as answer,  answer.value = country;
  } "addr";
}

group DataEntererPractitionerRoleToQr(source bundle : Bundle, source composition : Composition, source practitionerRole : PractitionerRole, target itemsender : BackboneElement) {
  composition -&gt;  itemsender.item as itemgroup,  itemgroup.linkId = 'sender.dataenterer' then {
    practitionerRole.practitioner as practitioner -&gt;  itemgroup.item as item,  item.linkId = 'sender.dataenterer.practitioner' then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %practitioner.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : Practitioner as practitioner then DataEntererPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
        } "fullUrlAsUuid";
        entry.resource : Practitioner as practitioner where ('Practitioner' + '/' + $this.id) in %practitioner.reference then DataEntererPractitionerToQr(bundle, composition, practitioner, item) "practitioner";
      };
    };
  } "dataenterer";
}

group DataEntererPractitionerToQr(source bundle : Bundle, source composition : Composition, source practitioner : Practitioner, target item : BackboneElement) {
  // sender.dataenterer.practitioner.familyName
  practitioner.name as name then {
    name.family as family -&gt;  item.item as item,  item.linkId = 'sender.dataenterer.practitioner.familyName',  item.answer as answer,  answer.value = family;
    // sender.dataenterer.practitioner.givenName
    name.given as given -&gt;  item.item as item,  item.linkId = 'sender.dataenterer.practitioner.givenName',  item.answer as answer,  answer.value = given;
  };
  // sender.dataenterer.practitioner.phone
  practitioner.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'sender.dataenterer.practitioner.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
  // sender.dataenterer.practitioner.email
  practitioner.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'sender.dataenterer.practitioner.email',  item.answer as answer,  answer.value = (telecom.value) "email";
}

group ReceiverCopyToQr(source bundle : Bundle, source composition : Composition, source serviceRequest : ServiceRequest, target item : BackboneElement) {
  composition.extension as extension where (url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-copyreceiver') then {
    extension.value as value then {
      bundle.entry as entry then {
        entry.fullUrl where ($this in %value.reference) and $this.startsWith('urn:uuid') then {
          entry.resource : Organization as organization then ReceiverCopyOrganizationToQr(bundle, composition, organization, item) "organization";
          entry.resource : Patient as patient then ReceiverCopyPatientToQr(bundle, composition, patient, item) "patient";
        } "fullUrlAsUuid";
        entry.resource : Organization as organization where ('Organization' + '/' + $this.id) in %value.reference then ReceiverCopyOrganizationToQr(bundle, composition, organization, item) "organization";
        entry.resource : Patient as patient where ('Patient' + '/' + $this.id) in %value.reference then ReceiverCopyPatientToQr(bundle, composition, patient, item) "patient";
      };
    };
  };
}

group ReceiverCopyOrganizationToQr(source bundle : Bundle, source composition : Composition, source organization : Organization, target itemsender : BackboneElement) {
  organization -&gt;  itemsender.item as item,  item.linkId = 'receiverCopy' then {
    // receiverCopy.organization.name
    organization.name as name -&gt;  item.item as item,  item.linkId = 'receiverCopy.organization.name',  item.answer as answer,  answer.value = name;
    organization.contact as contact then {
      contact.name as name then {
        // receiverCopy.title
        name.prefix as prefix where (extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC'))) -&gt;  item.item as item,  item.linkId = 'receiverCopy.title',  item.answer as answer,  answer.value = prefix;
        // receiverCopy.familyName
        name.family as family -&gt;  item.item as item,  item.linkId = 'receiverCopy.familyName',  item.answer as answer,  answer.value = family;
        // receiverCopy.givenName
        name.given as given -&gt;  item.item as item,  item.linkId = 'receiverCopy.givenName',  item.answer as answer,  answer.value = given;
      };
    };
    // receiverCopy.phone
    organization.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'receiverCopy.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
    // receiverCopy.email
    organization.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'receiverCopy.email',  item.answer as answer,  answer.value = (telecom.value) "email";
    // receiverCopy.organization.streetAddressLine
    organization.address as addr then {
      addr.line first as line1 -&gt;  item.item as item,  item.linkId = 'receiverCopy.streetAddressLine' then {
        addr.line as line -&gt;  item.answer as answer,  answer.value = line;
      } "addrlinefirst";
      // receiverCopy.postalCode
      addr.postalCode as postalCode -&gt;  item.item as item,  item.linkId = 'receiverCopy.postalCode',  item.answer as answer,  answer.value = postalCode;
      // receiverCopy.city
      addr.city as city -&gt;  item.item as item,  item.linkId = 'receiverCopy.city',  item.answer as answer,  answer.value = city;
      // receiverCopy.country
      addr.country as country -&gt;  item.item as item,  item.linkId = 'receiverCopy.country',  item.answer as answer,  answer.value = country;
    } "addr";
  } "organization";
}

group ReceiverCopyPatientToQr(source bundle : Bundle, source composition : Composition, source patient : Patient, target itemsender : BackboneElement) {
  patient -&gt;  itemsender.item as item,  item.linkId = 'receiverCopy' then {
    patient.name as name then {
      // receiverCopy.familyName
      name.family as family -&gt;  item.item as item,  item.linkId = 'receiverCopy.familyName',  item.answer as answer,  answer.value = family;
      // receiverCopy.givenName
      name.given as given -&gt;  item.item as item,  item.linkId = 'receiverCopy.givenName',  item.answer as answer,  answer.value = given;
      // receiverCopy.title
      name.prefix as prefix where (extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC'))) -&gt;  item.item as item,  item.linkId = 'receiverCopy.title',  item.answer as answer,  answer.value = prefix;
    };
    // receiverCopy.phone
    patient.telecom as telecom where (system = 'phone') -&gt;  item.item as item,  item.linkId = 'receiverCopy.phone',  item.answer as answer,  answer.value = (telecom.value) "phone";
    // receiverCopy.email
    patient.telecom as telecom where (system = 'email') -&gt;  item.item as item,  item.linkId = 'receiverCopy.email',  item.answer as answer,  answer.value = (telecom.value) "email";
    // receiverCopy.organization.streetAddressLine
    patient.address as addr then {
      addr.line first as line1 -&gt;  item.item as item,  item.linkId = 'receiverCopy.streetAddressLine' then {
        addr.line as line -&gt;  item.answer as answer,  answer.value = line;
      } "addrlinefirst";
      // receiverCopy.postalCode
      addr.postalCode as postalCode -&gt;  item.item as item,  item.linkId = 'receiverCopy.postalCode',  item.answer as answer,  answer.value = postalCode;
      // receiverCopy.city
      addr.city as city -&gt;  item.item as item,  item.linkId = 'receiverCopy.city',  item.answer as answer,  answer.value = city;
      // receiverCopy.country
      addr.country as country -&gt;  item.item as item,  item.linkId = 'receiverCopy.country',  item.answer as answer,  answer.value = country;
    } "addr";
  } "patient";
}

</pre>
      </div>
   </text>
   <url value="http://fhir.ch/ig/ch-orf/StructureMap/OrfBundleToQr"></url>
   <name value="OrfBundleToQr"></name>
   <description value="ORF Bundle To QuestionnaireResonse
2021-03-23 Oliver Egger, copyright ahdis ag, Apache License
Bundle: http://build.fhir.org/ig/hl7ch/ch-orf/StructureDefinition-ch-orf-document.html
QRF Questionnaire Response: http://build.fhir.org/ig/hl7ch/ch-orf/QuestionnaireResponse-referral-min.xml.html"></description>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Bundle"></url>
      <mode value="source"></mode>
      <alias value="Bundle"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Composition"></url>
      <mode value="source"></mode>
      <alias value="Composition"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Patient"></url>
      <mode value="source"></mode>
      <alias value="Patient"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Organization"></url>
      <mode value="source"></mode>
      <alias value="Organization"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Practitioner"></url>
      <mode value="source"></mode>
      <alias value="Practitioner"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/PractitionerRole"></url>
      <mode value="source"></mode>
      <alias value="PractitionerRole"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/ServiceRequest"></url>
      <mode value="source"></mode>
      <alias value="ServiceRequest"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/BackboneElement"></url>
      <mode value="source"></mode>
      <alias value="BackboneElement"></alias>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse"></url>
      <mode value="target"></mode>
      <alias value="QuestionnaireResponse"></alias>
   </structure>
   <group>
      <name value="OrfBundleToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="qr"></name>
         <type value="QuestionnaireResponse"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="questionnaire"></name>
         <source>
            <context value="bundle"></context>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="questionnaire"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-orf/Questionnaire/order-referral-form"></valueString>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="status"></name>
         <source>
            <context value="bundle"></context>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="status"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="completed"></valueString>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="bundle.entry"></name>
         <source>
            <context value="bundle"></context>
            <element value="entry"></element>
            <listMode value="first"></listMode>
            <variable value="entry"></variable>
         </source>
         <rule>
            <name value="entry.resource"></name>
            <source>
               <context value="entry"></context>
               <element value="resource"></element>
               <variable value="composition"></variable>
            </source>
            <rule>
               <name value="composition.section"></name>
               <source>
                  <context value="composition"></context>
                  <element value="section"></element>
                  <variable value="section"></variable>
               </source>
               <rule>
                  <name value="bundle.entry"></name>
                  <source>
                     <context value="bundle"></context>
                     <element value="entry"></element>
                     <variable value="entry"></variable>
                  </source>
                  <rule>
                     <name value="fullUrlAsUuid"></name>
                     <source>
                        <context value="entry"></context>
                        <element value="fullUrl"></element>
                        <condition value="($this in %section.entry.reference) and $this.startsWith('urn:uuid')"></condition>
                     </source>
                     <rule>
                        <name value="servicerequest"></name>
                        <source>
                           <context value="entry"></context>
                           <type value="ServiceRequest"></type>
                           <element value="resource"></element>
                           <variable value="serviceRequest"></variable>
                        </source>
                        <dependent>
                           <name value="CompositionToQr"></name>
                           <variable value="bundle"></variable>
                           <variable value="composition"></variable>
                           <variable value="serviceRequest"></variable>
                           <variable value="qr"></variable>
                        </dependent>
                     </rule>
                  </rule>
                  <rule>
                     <name value="servicerequest"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="ServiceRequest"></type>
                        <element value="resource"></element>
                        <variable value="serviceRequest"></variable>
                        <condition value="('ServiceRequest' + '/' + $this.id) in %section.entry.reference"></condition>
                     </source>
                     <dependent>
                        <name value="CompositionToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="serviceRequest"></variable>
                        <variable value="qr"></variable>
                     </dependent>
                  </rule>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="CompositionToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="serviceRequest"></name>
         <type value="ServiceRequest"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="qr"></name>
         <type value="QuestionnaireResponse"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="order"></name>
         <source>
            <context value="composition"></context>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order"></valueString>
            </parameter>
         </target>
         <dependent>
            <name value="OrderToQr"></name>
            <variable value="bundle"></variable>
            <variable value="composition"></variable>
            <variable value="serviceRequest"></variable>
            <variable value="item"></variable>
         </dependent>
      </rule>
      <rule>
         <name value="receiver"></name>
         <source>
            <context value="serviceRequest"></context>
            <element value="performer"></element>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiver"></valueString>
            </parameter>
         </target>
         <dependent>
            <name value="ReceiverToQr"></name>
            <variable value="bundle"></variable>
            <variable value="composition"></variable>
            <variable value="serviceRequest"></variable>
            <variable value="item"></variable>
         </dependent>
      </rule>
      <rule>
         <name value="patient"></name>
         <source>
            <context value="composition"></context>
            <element value="subject"></element>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="patient"></valueString>
            </parameter>
         </target>
         <dependent>
            <name value="PatientToQr"></name>
            <variable value="bundle"></variable>
            <variable value="composition"></variable>
            <variable value="serviceRequest"></variable>
            <variable value="item"></variable>
         </dependent>
      </rule>
      <rule>
         <name value="sender"></name>
         <source>
            <context value="composition"></context>
            <element value="author"></element>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender"></valueString>
            </parameter>
         </target>
         <dependent>
            <name value="SenderToQr"></name>
            <variable value="bundle"></variable>
            <variable value="composition"></variable>
            <variable value="serviceRequest"></variable>
            <variable value="item"></variable>
         </dependent>
      </rule>
      <rule>
         <name value="receiverCopies"></name>
         <source>
            <context value="composition"></context>
            <element value="extension"></element>
            <listMode value="first"></listMode>
            <variable value="extension"></variable>
            <condition value="(url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-copyreceiver')"></condition>
         </source>
         <target>
            <context value="qr"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiverCopies"></valueString>
            </parameter>
         </target>
         <dependent>
            <name value="ReceiverCopyToQr"></name>
            <variable value="bundle"></variable>
            <variable value="composition"></variable>
            <variable value="serviceRequest"></variable>
            <variable value="item"></variable>
         </dependent>
      </rule>
   </group>
   <group>
      <name value="OrderToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="serviceRequest"></name>
         <type value="ServiceRequest"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="order.placerOrderIdentifierDomain"></name>
         <source>
            <context value="serviceRequest"></context>
            <element value="identifier"></element>
            <variable value="identifier"></variable>
            <condition value="(type.coding.where((system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203') and (code.value = 'PLAC')))"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="itemfirst"></variable>
         </target>
         <target>
            <context value="itemfirst"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.placerOrderIdentifier"></valueString>
            </parameter>
         </target>
         <target>
            <context value="itemfirst"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="identifier.value"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="order.placerOrderIdentifierDomain"></name>
            <source>
               <context value="identifier"></context>
               <element value="system"></element>
               <variable value="system"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="itemsecond"></variable>
            </target>
            <target>
               <context value="itemsecond"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.placerOrderIdentifierDomain"></valueString>
               </parameter>
            </target>
            <target>
               <context value="itemsecond"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="cast"></transform>
               <parameter>
                  <valueId value="system"></valueId>
               </parameter>
               <parameter>
                  <valueString value="string"></valueString>
               </parameter>
            </target>
         </rule>
         <documentation value="&lt;linkId value=&quot;order.placerOrderIdentifierDomain&quot; /&gt;"></documentation>
      </rule>
      <rule>
         <name value="order.fillerOrderIdentifierDomain"></name>
         <source>
            <context value="serviceRequest"></context>
            <element value="identifier"></element>
            <variable value="identifier"></variable>
            <condition value="(type.coding.where((system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203') and (code.value = 'FILL')))"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="itemfirst"></variable>
         </target>
         <target>
            <context value="itemfirst"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.fillerOrderIdentifier"></valueString>
            </parameter>
         </target>
         <target>
            <context value="itemfirst"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="identifier.value"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="order.fillerOrderIdentifier"></name>
            <source>
               <context value="identifier"></context>
               <element value="system"></element>
               <variable value="system"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="itemsecond"></variable>
            </target>
            <target>
               <context value="itemsecond"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.fillerOrderIdentifierDomain"></valueString>
               </parameter>
            </target>
            <target>
               <context value="itemsecond"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="cast"></transform>
               <parameter>
                  <valueId value="system"></valueId>
               </parameter>
               <parameter>
                  <valueString value="string"></valueString>
               </parameter>
            </target>
         </rule>
         <documentation value="&lt;linkId value=&quot;order.fillerOrderIdentifier&quot; /&gt;"></documentation>
      </rule>
      <rule>
         <name value="composition"></name>
         <source>
            <context value="composition"></context>
            <element value="extension"></element>
            <variable value="extension"></variable>
            <condition value="url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-precedentdocument'"></condition>
         </source>
         <rule>
            <name value="order.precedentDocumentIdentifier"></name>
            <source>
               <context value="extension"></context>
               <element value="value"></element>
               <variable value="value"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.precedentDocumentIdentifier"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="evaluate"></transform>
               <parameter>
                  <valueString value="value.value"></valueString>
               </parameter>
            </target>
         </rule>
         <documentation value="&lt;linkId value=&quot;order.precedentDocumentIdentifier&quot; /&gt;"></documentation>
      </rule>
      <rule>
         <name value="composition"></name>
         <source>
            <context value="composition"></context>
            <element value="extension"></element>
            <variable value="extension"></variable>
            <condition value="url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-urgentnoficationcontactforthisdocument'"></condition>
         </source>
         <rule>
            <name value="extension.value"></name>
            <source>
               <context value="extension"></context>
               <element value="value"></element>
               <variable value="value"></variable>
            </source>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %value.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="practitionerRole"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="PractitionerRole"></type>
                        <element value="resource"></element>
                        <variable value="practitionerRole"></variable>
                     </source>
                     <dependent>
                        <name value="UrgentNotificationToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitionerRole"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="practitionerRole"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="PractitionerRole"></type>
                     <element value="resource"></element>
                     <variable value="practitionerRole"></variable>
                     <condition value="('PractitionerRole' + '/' + $this.id) in %value.reference"></condition>
                  </source>
                  <dependent>
                     <name value="UrgentNotificationToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitionerRole"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
         <documentation value="'order.dateTime'- currently not mapped in qr response"></documentation>
      </rule>
      <rule>
         <name value="composition"></name>
         <source>
            <context value="composition"></context>
            <element value="extension"></element>
            <variable value="extension"></variable>
            <condition value="url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-urgentnoficationcontactfortheresponsetothisdocument'"></condition>
         </source>
         <rule>
            <name value="extension.value"></name>
            <source>
               <context value="extension"></context>
               <element value="value"></element>
               <variable value="value"></variable>
            </source>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %value.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="practitionerRole"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="PractitionerRole"></type>
                        <element value="resource"></element>
                        <variable value="practitionerRole"></variable>
                     </source>
                     <dependent>
                        <name value="UrgentNotificationResponseToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitionerRole"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="practitionerRole"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="PractitionerRole"></type>
                     <element value="resource"></element>
                     <variable value="practitionerRole"></variable>
                     <condition value="('PractitionerRole' + '/' + $this.id) in %value.reference"></condition>
                  </source>
                  <dependent>
                     <name value="UrgentNotificationResponseToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitionerRole"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
         <documentation value="Urgent Notification Contact for the Response to this document"></documentation>
      </rule>
      <rule>
         <name value="order.priority"></name>
         <source>
            <context value="serviceRequest"></context>
            <element value="priority"></element>
            <variable value="priority"></variable>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.priority"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <variable value="coding"></variable>
            <transform value="create"></transform>
            <parameter>
               <valueString value="Coding"></valueString>
            </parameter>
         </target>
         <target>
            <context value="coding"></context>
            <contextType value="variable"></contextType>
            <element value="system"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="http://hl7.org/fhir/request-priority"></valueString>
            </parameter>
         </target>
         <target>
            <context value="coding"></context>
            <contextType value="variable"></contextType>
            <element value="code"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueId value="priority"></valueId>
            </parameter>
         </target>
         <documentation value="order.priority"></documentation>
      </rule>
   </group>
   <group>
      <name value="UrgentNotificationToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitionerRole"></name>
         <type value="PractitionerRole"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="urgentnotification"></name>
         <source>
            <context value="composition"></context>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="itemgroup"></variable>
         </target>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocument"></valueString>
            </parameter>
         </target>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocument.practitioner"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="practitioner"></name>
            <source>
               <context value="practitionerRole"></context>
               <element value="practitioner"></element>
               <variable value="practitioner"></variable>
            </source>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %practitioner.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="practitioner"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Practitioner"></type>
                        <element value="resource"></element>
                        <variable value="practitioner"></variable>
                     </source>
                     <dependent>
                        <name value="UrgentNotificationPractitionerToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitioner"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Practitioner"></type>
                     <element value="resource"></element>
                     <variable value="practitioner"></variable>
                     <condition value="('Practitioner' + '/' + $this.id) in %practitioner.reference"></condition>
                  </source>
                  <dependent>
                     <name value="UrgentNotificationPractitionerToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitioner"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="UrgentNotificationPractitionerToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitioner"></name>
         <type value="Practitioner"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="practitioner"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <rule>
            <name value="prefix"></name>
            <source>
               <context value="name"></context>
               <element value="prefix"></element>
               <variable value="prefix"></variable>
               <condition value="(extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC')))"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.notificationContactDocument.practitioner.title"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="prefix"></valueId>
               </parameter>
            </target>
            <documentation value="order.notificationContactDocument.practitioner.title"></documentation>
         </rule>
         <rule>
            <name value="family"></name>
            <source>
               <context value="name"></context>
               <element value="family"></element>
               <variable value="family"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.notificationContactDocument.practitioner.familyName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="family"></valueId>
               </parameter>
            </target>
            <documentation value="order.notificationContactDocument.practitioner.familyName"></documentation>
         </rule>
         <rule>
            <name value="given"></name>
            <source>
               <context value="name"></context>
               <element value="given"></element>
               <variable value="given"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.notificationContactDocument.practitioner.givenName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="given"></valueId>
               </parameter>
            </target>
            <documentation value="order.notificationContactDocument.practitioner.givenName"></documentation>
         </rule>
      </rule>
      <rule>
         <name value="phone"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'phone')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocument.practitioner.phone"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="order.notificationContactDocument.practitioner.phone"></documentation>
      </rule>
      <rule>
         <name value="email"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'email')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocument.practitioner.email"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="order.notificationContactDocument.practitioner.memaol"></documentation>
      </rule>
   </group>
   <group>
      <name value="UrgentNotificationResponseToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitionerRole"></name>
         <type value="PractitionerRole"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="urgentnotification"></name>
         <source>
            <context value="composition"></context>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="itemgroup"></variable>
         </target>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocumentResponse"></valueString>
            </parameter>
         </target>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocumentResponse.practitioner"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="practitioner"></name>
            <source>
               <context value="practitionerRole"></context>
               <element value="practitioner"></element>
               <variable value="practitioner"></variable>
            </source>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %practitioner.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="practitioner"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Practitioner"></type>
                        <element value="resource"></element>
                        <variable value="practitioner"></variable>
                     </source>
                     <dependent>
                        <name value="UrgentNotificationResponsePractitionerToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitioner"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Practitioner"></type>
                     <element value="resource"></element>
                     <variable value="practitioner"></variable>
                     <condition value="('Practitioner' + '/' + $this.id) in %practitioner.reference"></condition>
                  </source>
                  <dependent>
                     <name value="UrgentNotificationResponsePractitionerToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitioner"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
         <documentation value="order.notificationContactDocumentResponse"></documentation>
      </rule>
   </group>
   <group>
      <name value="UrgentNotificationResponsePractitionerToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitioner"></name>
         <type value="Practitioner"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="practitioner"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <rule>
            <name value="prefix"></name>
            <source>
               <context value="name"></context>
               <element value="prefix"></element>
               <variable value="prefix"></variable>
               <condition value="(extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC')))"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.notificationContactDocumentResponse.practitioner.title"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="prefix"></valueId>
               </parameter>
            </target>
            <documentation value="order.notificationContactDocumentResponse.practitioner.title"></documentation>
         </rule>
         <rule>
            <name value="family"></name>
            <source>
               <context value="name"></context>
               <element value="family"></element>
               <variable value="family"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.notificationContactDocumentResponse.practitioner.familyName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="family"></valueId>
               </parameter>
            </target>
            <documentation value="order.notificationContactDocumentResponse.practitioner.familyName"></documentation>
         </rule>
         <rule>
            <name value="given"></name>
            <source>
               <context value="name"></context>
               <element value="given"></element>
               <variable value="given"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="order.notificationContactDocumentResponse.practitioner.givenName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="given"></valueId>
               </parameter>
            </target>
            <documentation value="order.notificationContactDocumentResponse.practitioner.givenName"></documentation>
         </rule>
      </rule>
      <rule>
         <name value="phone"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'phone')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocumentResponse.practitioner.phone"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="order.notificationContactDocumentResponse.practitioner.phone"></documentation>
      </rule>
      <rule>
         <name value="email"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'email')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="order.notificationContactDocumentResponse.practitioner.email"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="order.notificationContactDocumentResponse.practitioner.memaol"></documentation>
      </rule>
   </group>
   <group>
      <name value="ReceiverToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="serviceRequest"></name>
         <type value="ServiceRequest"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="practitioner"></name>
         <source>
            <context value="serviceRequest"></context>
            <element value="performer"></element>
            <variable value="performer"></variable>
         </source>
         <rule>
            <name value="bundle.entry"></name>
            <source>
               <context value="bundle"></context>
               <element value="entry"></element>
               <variable value="entry"></variable>
            </source>
            <rule>
               <name value="fullUrlAsUuid"></name>
               <source>
                  <context value="entry"></context>
                  <element value="fullUrl"></element>
                  <condition value="($this in %performer.reference) and $this.startsWith('urn:uuid')"></condition>
               </source>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="PractitionerRole"></type>
                     <element value="resource"></element>
                     <variable value="practitionerRole"></variable>
                  </source>
                  <dependent>
                     <name value="ReceiverPractitionerRoleToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitionerRole"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
            <rule>
               <name value="practitioner"></name>
               <source>
                  <context value="entry"></context>
                  <type value="PractitionerRoler"></type>
                  <element value="resource"></element>
                  <variable value="practitionerRole"></variable>
                  <condition value="('PractitionerRole' + '/' + $this.id) in %performer.reference"></condition>
               </source>
               <dependent>
                  <name value="ReceiverPractitionerRoleToQr"></name>
                  <variable value="bundle"></variable>
                  <variable value="composition"></variable>
                  <variable value="practitionerRole"></variable>
                  <variable value="item"></variable>
               </dependent>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ReceiverPractitionerRoleToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitionerRole"></name>
         <type value="PractitionerRole"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="itemgroup"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="practitioner"></name>
         <source>
            <context value="practitionerRole"></context>
            <element value="practitioner"></element>
            <variable value="practitioner"></variable>
         </source>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiver.practitioner"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="bundle.entry"></name>
            <source>
               <context value="bundle"></context>
               <element value="entry"></element>
               <variable value="entry"></variable>
            </source>
            <rule>
               <name value="fullUrlAsUuid"></name>
               <source>
                  <context value="entry"></context>
                  <element value="fullUrl"></element>
                  <condition value="($this in %practitioner.reference) and $this.startsWith('urn:uuid')"></condition>
               </source>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Practitioner"></type>
                     <element value="resource"></element>
                     <variable value="practitioner"></variable>
                  </source>
                  <dependent>
                     <name value="ReceiverPractitionerToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitioner"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
            <rule>
               <name value="practitioner"></name>
               <source>
                  <context value="entry"></context>
                  <type value="Practitioner"></type>
                  <element value="resource"></element>
                  <variable value="practitioner"></variable>
                  <condition value="('Practitioner' + '/' + $this.id) in %practitioner.reference"></condition>
               </source>
               <dependent>
                  <name value="ReceiverPractitionerToQr"></name>
                  <variable value="bundle"></variable>
                  <variable value="composition"></variable>
                  <variable value="practitioner"></variable>
                  <variable value="item"></variable>
               </dependent>
            </rule>
         </rule>
      </rule>
      <rule>
         <name value="organization"></name>
         <source>
            <context value="practitionerRole"></context>
            <element value="organization"></element>
            <variable value="organization"></variable>
         </source>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiver.organization"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="bundle.entry"></name>
            <source>
               <context value="bundle"></context>
               <element value="entry"></element>
               <variable value="entry"></variable>
            </source>
            <rule>
               <name value="fullUrlAsUuid"></name>
               <source>
                  <context value="entry"></context>
                  <element value="fullUrl"></element>
                  <condition value="($this in %organization.reference) and $this.startsWith('urn:uuid')"></condition>
               </source>
               <rule>
                  <name value="organization"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Organization"></type>
                     <element value="resource"></element>
                     <variable value="organization"></variable>
                  </source>
                  <dependent>
                     <name value="ReceiverOrganizationToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="organization"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
            <rule>
               <name value="organization"></name>
               <source>
                  <context value="entry"></context>
                  <type value="Organization"></type>
                  <element value="resource"></element>
                  <variable value="organization"></variable>
                  <condition value="('Organization' + '/' + $this.id) in %organization.reference"></condition>
               </source>
               <dependent>
                  <name value="ReceiverOrganizationToQr"></name>
                  <variable value="bundle"></variable>
                  <variable value="composition"></variable>
                  <variable value="practitioner"></variable>
                  <variable value="item"></variable>
               </dependent>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ReceiverPractitionerToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitioner"></name>
         <type value="Practitioner"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="practitioner"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <rule>
            <name value="prefix"></name>
            <source>
               <context value="name"></context>
               <element value="prefix"></element>
               <variable value="prefix"></variable>
               <condition value="(extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC')))"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.practitioner.title"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="prefix"></valueId>
               </parameter>
            </target>
            <documentation value="receiver.practitioner.title"></documentation>
         </rule>
         <rule>
            <name value="family"></name>
            <source>
               <context value="name"></context>
               <element value="family"></element>
               <variable value="family"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.practitioner.familyName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="family"></valueId>
               </parameter>
            </target>
            <documentation value="receiver.practitioner.familyName"></documentation>
         </rule>
         <rule>
            <name value="given"></name>
            <source>
               <context value="name"></context>
               <element value="given"></element>
               <variable value="given"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.practitioner.givenName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="given"></valueId>
               </parameter>
            </target>
            <documentation value="receiver.practitioner.givenName"></documentation>
         </rule>
      </rule>
      <rule>
         <name value="identifier"></name>
         <source>
            <context value="practitioner"></context>
            <element value="identifier"></element>
            <variable value="identifier"></variable>
            <condition value="(system = 'urn:oid:2.51.1.3')"></condition>
         </source>
         <rule>
            <name value="gln"></name>
            <source>
               <context value="identifier"></context>
               <element value="value"></element>
               <variable value="value"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.practitioner.gln"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="cast"></transform>
               <parameter>
                  <valueId value="value"></valueId>
               </parameter>
               <parameter>
                  <valueString value="string"></valueString>
               </parameter>
            </target>
         </rule>
         <documentation value="receiver.practitioner.gln"></documentation>
      </rule>
      <rule>
         <name value="phone"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'phone')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiver.practitioner.phone"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="receiver.practitioner.phone"></documentation>
      </rule>
      <rule>
         <name value="email"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'email')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiver.practitioner.email"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="receiver.practitioneremail"></documentation>
      </rule>
   </group>
   <group>
      <name value="ReceiverOrganizationToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="organization"></name>
         <type value="Organization"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="organization"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiver.organization.name"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueId value="name"></valueId>
            </parameter>
         </target>
         <documentation value="receiver.organization.name"></documentation>
      </rule>
      <rule>
         <name value="addr"></name>
         <source>
            <context value="organization"></context>
            <element value="address"></element>
            <variable value="addr"></variable>
         </source>
         <rule>
            <name value="addrlinefirst"></name>
            <source>
               <context value="addr"></context>
               <element value="line"></element>
               <listMode value="first"></listMode>
               <variable value="line1"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.organization.streetAddressLine"></valueString>
               </parameter>
            </target>
            <rule>
               <name value="line"></name>
               <source>
                  <context value="addr"></context>
                  <element value="line"></element>
                  <variable value="line"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="line"></valueId>
                  </parameter>
               </target>
            </rule>
         </rule>
         <rule>
            <name value="postalCode"></name>
            <source>
               <context value="addr"></context>
               <element value="postalCode"></element>
               <variable value="postalCode"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.organization.postalCode"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="postalCode"></valueId>
               </parameter>
            </target>
            <documentation value="receiver.organization.postalCode"></documentation>
         </rule>
         <rule>
            <name value="city"></name>
            <source>
               <context value="addr"></context>
               <element value="city"></element>
               <variable value="city"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.organization.city"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="city"></valueId>
               </parameter>
            </target>
            <documentation value="receiver.organization.city"></documentation>
         </rule>
         <rule>
            <name value="country"></name>
            <source>
               <context value="addr"></context>
               <element value="country"></element>
               <variable value="country"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiver.organization.country"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="country"></valueId>
               </parameter>
            </target>
            <documentation value="receiver.organization.country"></documentation>
         </rule>
         <documentation value="receiver.organization.streetAddressLine"></documentation>
      </rule>
   </group>
   <group>
      <name value="PatientToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="serviceRequest"></name>
         <type value="ServiceRequest"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="practitioner"></name>
         <source>
            <context value="composition"></context>
            <element value="subject"></element>
            <variable value="subject"></variable>
         </source>
         <rule>
            <name value="bundle.entry"></name>
            <source>
               <context value="bundle"></context>
               <element value="entry"></element>
               <variable value="entry"></variable>
            </source>
            <rule>
               <name value="fullUrlAsUuid"></name>
               <source>
                  <context value="entry"></context>
                  <element value="fullUrl"></element>
                  <condition value="($this in %subject.reference) and $this.startsWith('urn:uuid')"></condition>
               </source>
               <rule>
                  <name value="patient"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Patient"></type>
                     <element value="resource"></element>
                     <variable value="patient"></variable>
                  </source>
                  <dependent>
                     <name value="PatientDetailsToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="patient"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
            <rule>
               <name value="patient"></name>
               <source>
                  <context value="entry"></context>
                  <type value="Patient"></type>
                  <element value="resource"></element>
                  <variable value="patient"></variable>
                  <condition value="('Patient' + '/' + $this.id) in %subject.reference"></condition>
               </source>
               <dependent>
                  <name value="PatientDetailsToQr"></name>
                  <variable value="bundle"></variable>
                  <variable value="composition"></variable>
                  <variable value="patient"></variable>
                  <variable value="item"></variable>
               </dependent>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="PatientDetailsToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="patient"></name>
         <type value="Patient"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="patient"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <rule>
            <name value="family"></name>
            <source>
               <context value="name"></context>
               <element value="family"></element>
               <variable value="family"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.familyName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="family"></valueId>
               </parameter>
            </target>
         </rule>
         <rule>
            <name value="given"></name>
            <source>
               <context value="name"></context>
               <element value="given"></element>
               <variable value="given"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.givenName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="given"></valueId>
               </parameter>
            </target>
            <documentation value="patient.givenName"></documentation>
         </rule>
         <documentation value="patient.familyName"></documentation>
      </rule>
      <rule>
         <name value="patient.localPid"></name>
         <source>
            <context value="patient"></context>
            <element value="identifier"></element>
            <variable value="identifier"></variable>
            <condition value="(type.coding.where((system.value = 'http://terminology.hl7.org/CodeSystem/v2-0203') and (code.value = 'MR')))"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="patient.localPid"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="identifier.value"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="order.placerOrderIdentifierDomain"></name>
            <source>
               <context value="identifier"></context>
               <element value="system"></element>
               <variable value="system"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.localPidDomain"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="cast"></transform>
               <parameter>
                  <valueId value="system"></valueId>
               </parameter>
               <parameter>
                  <valueString value="string"></valueString>
               </parameter>
            </target>
         </rule>
         <documentation value="patient.localPid"></documentation>
      </rule>
      <rule>
         <name value="patient.birthDate"></name>
         <source>
            <context value="patient"></context>
            <element value="birthDate"></element>
            <variable value="birthDate"></variable>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="patient.birthDate"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueId value="birthDate"></valueId>
            </parameter>
         </target>
         <documentation value="patient.birthDate"></documentation>
      </rule>
      <rule>
         <name value="patient.gender"></name>
         <source>
            <context value="patient"></context>
            <element value="gender"></element>
            <variable value="gender"></variable>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="patient.gender"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <variable value="coding"></variable>
            <transform value="create"></transform>
            <parameter>
               <valueString value="Coding"></valueString>
            </parameter>
         </target>
         <target>
            <context value="coding"></context>
            <contextType value="variable"></contextType>
            <element value="system"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="http://hl7.org/fhir/administrative-gender"></valueString>
            </parameter>
         </target>
         <target>
            <context value="coding"></context>
            <contextType value="variable"></contextType>
            <element value="code"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueId value="gender"></valueId>
            </parameter>
         </target>
         <documentation value="patient.gender"></documentation>
      </rule>
      <rule>
         <name value="phone"></name>
         <source>
            <context value="patient"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'phone')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="patient.phone"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="patient.phone"></documentation>
      </rule>
      <rule>
         <name value="email"></name>
         <source>
            <context value="patient"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'email')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="patient.email"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="patient.email"></documentation>
      </rule>
      <rule>
         <name value="addr"></name>
         <source>
            <context value="patient"></context>
            <element value="address"></element>
            <variable value="addr"></variable>
         </source>
         <rule>
            <name value="addrlinefirst"></name>
            <source>
               <context value="addr"></context>
               <element value="line"></element>
               <listMode value="first"></listMode>
               <variable value="line1"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.streetAddressLine"></valueString>
               </parameter>
            </target>
            <rule>
               <name value="line"></name>
               <source>
                  <context value="addr"></context>
                  <element value="line"></element>
                  <variable value="line"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="line"></valueId>
                  </parameter>
               </target>
            </rule>
         </rule>
         <rule>
            <name value="postalCode"></name>
            <source>
               <context value="addr"></context>
               <element value="postalCode"></element>
               <variable value="postalCode"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.postalCode"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="postalCode"></valueId>
               </parameter>
            </target>
            <documentation value="patient.postalCode"></documentation>
         </rule>
         <rule>
            <name value="city"></name>
            <source>
               <context value="addr"></context>
               <element value="city"></element>
               <variable value="city"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.city"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="city"></valueId>
               </parameter>
            </target>
            <documentation value="patient.city"></documentation>
         </rule>
         <rule>
            <name value="country"></name>
            <source>
               <context value="addr"></context>
               <element value="country"></element>
               <variable value="country"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="patient.country"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="country"></valueId>
               </parameter>
            </target>
            <documentation value="patient.country"></documentation>
         </rule>
      </rule>
   </group>
   <group>
      <name value="SenderToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="serviceRequest"></name>
         <type value="ServiceRequest"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="author"></name>
         <source>
            <context value="composition"></context>
            <element value="author"></element>
            <variable value="author"></variable>
         </source>
         <rule>
            <name value="bundle.entry"></name>
            <source>
               <context value="bundle"></context>
               <element value="entry"></element>
               <variable value="entry"></variable>
            </source>
            <rule>
               <name value="fullUrlAsUuid"></name>
               <source>
                  <context value="entry"></context>
                  <element value="fullUrl"></element>
                  <condition value="($this in %author.reference) and $this.startsWith('urn:uuid')"></condition>
               </source>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="PractitionerRole"></type>
                     <element value="resource"></element>
                     <variable value="practitionerRole"></variable>
                  </source>
                  <dependent>
                     <name value="SenderPractitionerRoleToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitionerRole"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
            <rule>
               <name value="practitioner"></name>
               <source>
                  <context value="entry"></context>
                  <type value="PractitionerRoler"></type>
                  <element value="resource"></element>
                  <variable value="practitionerRole"></variable>
                  <condition value="('PractitionerRole' + '/' + $this.id) in %author.reference"></condition>
               </source>
               <dependent>
                  <name value="SenderPractitionerRoleToQr"></name>
                  <variable value="bundle"></variable>
                  <variable value="composition"></variable>
                  <variable value="practitionerRole"></variable>
                  <variable value="item"></variable>
               </dependent>
            </rule>
         </rule>
      </rule>
      <rule>
         <name value="dataenterer"></name>
         <source>
            <context value="composition"></context>
            <element value="extension"></element>
            <variable value="ext"></variable>
            <condition value="(url = 'http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer')"></condition>
         </source>
         <rule>
            <name value="enterer"></name>
            <source>
               <context value="ext"></context>
               <element value="extension"></element>
               <variable value="extension"></variable>
               <condition value="(url = 'enterer')"></condition>
            </source>
            <rule>
               <name value="extension.value"></name>
               <source>
                  <context value="extension"></context>
                  <element value="value"></element>
                  <variable value="value"></variable>
               </source>
               <rule>
                  <name value="bundle.entry"></name>
                  <source>
                     <context value="bundle"></context>
                     <element value="entry"></element>
                     <variable value="entry"></variable>
                  </source>
                  <rule>
                     <name value="fullUrlAsUuid"></name>
                     <source>
                        <context value="entry"></context>
                        <element value="fullUrl"></element>
                        <condition value="($this in %value.reference) and $this.startsWith('urn:uuid')"></condition>
                     </source>
                     <rule>
                        <name value="practitionerRole"></name>
                        <source>
                           <context value="entry"></context>
                           <type value="PractitionerRole"></type>
                           <element value="resource"></element>
                           <variable value="practitionerRole"></variable>
                        </source>
                        <dependent>
                           <name value="DataEntererPractitionerRoleToQr"></name>
                           <variable value="bundle"></variable>
                           <variable value="composition"></variable>
                           <variable value="practitionerRole"></variable>
                           <variable value="item"></variable>
                        </dependent>
                     </rule>
                  </rule>
                  <rule>
                     <name value="practitionerRole"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="PractitionerRole"></type>
                        <element value="resource"></element>
                        <variable value="practitionerRole"></variable>
                        <condition value="('PractitionerRole' + '/' + $this.id) in %value.reference"></condition>
                     </source>
                     <dependent>
                        <name value="DataEntererPractitionerRoleToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitionerRole"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="SenderPractitionerRoleToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitionerRole"></name>
         <type value="PractitionerRole"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="itemsender"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="sender.author"></name>
         <source>
            <context value="composition"></context>
         </source>
         <target>
            <context value="itemsender"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="itemgroup"></variable>
         </target>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.author"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="practitioner"></name>
            <source>
               <context value="practitionerRole"></context>
               <element value="practitioner"></element>
               <variable value="practitioner"></variable>
            </source>
            <target>
               <context value="itemgroup"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.practitioner"></valueString>
               </parameter>
            </target>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %practitioner.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="practitioner"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Practitioner"></type>
                        <element value="resource"></element>
                        <variable value="practitioner"></variable>
                     </source>
                     <dependent>
                        <name value="SenderPractitionerToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitioner"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Practitioner"></type>
                     <element value="resource"></element>
                     <variable value="practitioner"></variable>
                     <condition value="('Practitioner' + '/' + $this.id) in %practitioner.reference"></condition>
                  </source>
                  <dependent>
                     <name value="SenderPractitionerToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitioner"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
         <rule>
            <name value="organization"></name>
            <source>
               <context value="practitionerRole"></context>
               <element value="organization"></element>
               <variable value="organization"></variable>
            </source>
            <target>
               <context value="itemgroup"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.organization"></valueString>
               </parameter>
            </target>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %organization.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="organization"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Organization"></type>
                        <element value="resource"></element>
                        <variable value="organization"></variable>
                     </source>
                     <dependent>
                        <name value="SenderOrganizationToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="organization"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="organization"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Organization"></type>
                     <element value="resource"></element>
                     <variable value="organization"></variable>
                     <condition value="('Organization' + '/' + $this.id) in %organization.reference"></condition>
                  </source>
                  <dependent>
                     <name value="SenderOrganizationToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitioner"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="SenderPractitionerToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitioner"></name>
         <type value="Practitioner"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="practitioner"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <rule>
            <name value="prefix"></name>
            <source>
               <context value="name"></context>
               <element value="prefix"></element>
               <variable value="prefix"></variable>
               <condition value="(extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC')))"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.practitioner.title"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="prefix"></valueId>
               </parameter>
            </target>
            <documentation value="sender.author.practitioner.title"></documentation>
         </rule>
         <rule>
            <name value="family"></name>
            <source>
               <context value="name"></context>
               <element value="family"></element>
               <variable value="family"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.practitioner.familyName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="family"></valueId>
               </parameter>
            </target>
            <documentation value="sender.author.practitioner.familyName"></documentation>
         </rule>
         <rule>
            <name value="given"></name>
            <source>
               <context value="name"></context>
               <element value="given"></element>
               <variable value="given"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.practitioner.givenName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="given"></valueId>
               </parameter>
            </target>
            <documentation value="sender.author.practitioner.givenName"></documentation>
         </rule>
      </rule>
      <rule>
         <name value="identifier"></name>
         <source>
            <context value="practitioner"></context>
            <element value="identifier"></element>
            <variable value="identifier"></variable>
            <condition value="(system = 'urn:oid:2.51.1.3')"></condition>
         </source>
         <rule>
            <name value="gln"></name>
            <source>
               <context value="identifier"></context>
               <element value="value"></element>
               <variable value="value"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.practitioner.gln"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="cast"></transform>
               <parameter>
                  <valueId value="value"></valueId>
               </parameter>
               <parameter>
                  <valueString value="string"></valueString>
               </parameter>
            </target>
         </rule>
         <documentation value="sender.author.practitioner.gln"></documentation>
      </rule>
      <rule>
         <name value="phone"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'phone')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.author.practitioner.phone"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="sender.author.practitioner.phone"></documentation>
      </rule>
      <rule>
         <name value="email"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'email')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.author.practitioner.email"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="sender.author.practitioneremila"></documentation>
      </rule>
   </group>
   <group>
      <name value="SenderOrganizationToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="organization"></name>
         <type value="Organization"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="organization"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.author.organization.name"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueId value="name"></valueId>
            </parameter>
         </target>
         <documentation value="sender.author.organization.name"></documentation>
      </rule>
      <rule>
         <name value="addr"></name>
         <source>
            <context value="organization"></context>
            <element value="address"></element>
            <variable value="addr"></variable>
         </source>
         <rule>
            <name value="addrlinefirst"></name>
            <source>
               <context value="addr"></context>
               <element value="line"></element>
               <listMode value="first"></listMode>
               <variable value="line1"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.organization.streetAddressLine"></valueString>
               </parameter>
            </target>
            <rule>
               <name value="line"></name>
               <source>
                  <context value="addr"></context>
                  <element value="line"></element>
                  <variable value="line"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="line"></valueId>
                  </parameter>
               </target>
            </rule>
         </rule>
         <rule>
            <name value="postalCode"></name>
            <source>
               <context value="addr"></context>
               <element value="postalCode"></element>
               <variable value="postalCode"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.organization.postalCode"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="postalCode"></valueId>
               </parameter>
            </target>
            <documentation value="sender.author.organization.postalCode"></documentation>
         </rule>
         <rule>
            <name value="city"></name>
            <source>
               <context value="addr"></context>
               <element value="city"></element>
               <variable value="city"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.organization.city"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="city"></valueId>
               </parameter>
            </target>
            <documentation value="sender.author.organization.city"></documentation>
         </rule>
         <rule>
            <name value="country"></name>
            <source>
               <context value="addr"></context>
               <element value="country"></element>
               <variable value="country"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.author.organization.country"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="country"></valueId>
               </parameter>
            </target>
            <documentation value="sender.author.organization.country"></documentation>
         </rule>
         <documentation value="sender.author.organization.streetAddressLine"></documentation>
      </rule>
   </group>
   <group>
      <name value="DataEntererPractitionerRoleToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitionerRole"></name>
         <type value="PractitionerRole"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="itemsender"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="sender.dataenterer"></name>
         <source>
            <context value="composition"></context>
         </source>
         <target>
            <context value="itemsender"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="itemgroup"></variable>
         </target>
         <target>
            <context value="itemgroup"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.dataenterer"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="practitioner"></name>
            <source>
               <context value="practitionerRole"></context>
               <element value="practitioner"></element>
               <variable value="practitioner"></variable>
            </source>
            <target>
               <context value="itemgroup"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.dataenterer.practitioner"></valueString>
               </parameter>
            </target>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %practitioner.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="practitioner"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Practitioner"></type>
                        <element value="resource"></element>
                        <variable value="practitioner"></variable>
                     </source>
                     <dependent>
                        <name value="DataEntererPractitionerToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="practitioner"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="practitioner"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Practitioner"></type>
                     <element value="resource"></element>
                     <variable value="practitioner"></variable>
                     <condition value="('Practitioner' + '/' + $this.id) in %practitioner.reference"></condition>
                  </source>
                  <dependent>
                     <name value="DataEntererPractitionerToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="practitioner"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="DataEntererPractitionerToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="practitioner"></name>
         <type value="Practitioner"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="name"></name>
         <source>
            <context value="practitioner"></context>
            <element value="name"></element>
            <variable value="name"></variable>
         </source>
         <rule>
            <name value="family"></name>
            <source>
               <context value="name"></context>
               <element value="family"></element>
               <variable value="family"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.dataenterer.practitioner.familyName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="family"></valueId>
               </parameter>
            </target>
         </rule>
         <rule>
            <name value="given"></name>
            <source>
               <context value="name"></context>
               <element value="given"></element>
               <variable value="given"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="sender.dataenterer.practitioner.givenName"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="given"></valueId>
               </parameter>
            </target>
            <documentation value="sender.dataenterer.practitioner.givenName"></documentation>
         </rule>
         <documentation value="sender.dataenterer.practitioner.familyName"></documentation>
      </rule>
      <rule>
         <name value="phone"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'phone')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.dataenterer.practitioner.phone"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="sender.dataenterer.practitioner.phone"></documentation>
      </rule>
      <rule>
         <name value="email"></name>
         <source>
            <context value="practitioner"></context>
            <element value="telecom"></element>
            <variable value="telecom"></variable>
            <condition value="(system = 'email')"></condition>
         </source>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="sender.dataenterer.practitioner.email"></valueString>
            </parameter>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="answer"></element>
            <variable value="answer"></variable>
         </target>
         <target>
            <context value="answer"></context>
            <contextType value="variable"></contextType>
            <element value="value"></element>
            <transform value="evaluate"></transform>
            <parameter>
               <valueString value="telecom.value"></valueString>
            </parameter>
         </target>
         <documentation value="sender.dataenterer.practitioner.email"></documentation>
      </rule>
   </group>
   <group>
      <name value="ReceiverCopyToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="serviceRequest"></name>
         <type value="ServiceRequest"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="item"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="extension"></name>
         <source>
            <context value="composition"></context>
            <element value="extension"></element>
            <variable value="extension"></variable>
            <condition value="(url = 'http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-copyreceiver')"></condition>
         </source>
         <rule>
            <name value="extension.value"></name>
            <source>
               <context value="extension"></context>
               <element value="value"></element>
               <variable value="value"></variable>
            </source>
            <rule>
               <name value="bundle.entry"></name>
               <source>
                  <context value="bundle"></context>
                  <element value="entry"></element>
                  <variable value="entry"></variable>
               </source>
               <rule>
                  <name value="fullUrlAsUuid"></name>
                  <source>
                     <context value="entry"></context>
                     <element value="fullUrl"></element>
                     <condition value="($this in %value.reference) and $this.startsWith('urn:uuid')"></condition>
                  </source>
                  <rule>
                     <name value="organization"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Organization"></type>
                        <element value="resource"></element>
                        <variable value="organization"></variable>
                     </source>
                     <dependent>
                        <name value="ReceiverCopyOrganizationToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="organization"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
                  <rule>
                     <name value="patient"></name>
                     <source>
                        <context value="entry"></context>
                        <type value="Patient"></type>
                        <element value="resource"></element>
                        <variable value="patient"></variable>
                     </source>
                     <dependent>
                        <name value="ReceiverCopyPatientToQr"></name>
                        <variable value="bundle"></variable>
                        <variable value="composition"></variable>
                        <variable value="patient"></variable>
                        <variable value="item"></variable>
                     </dependent>
                  </rule>
               </rule>
               <rule>
                  <name value="organization"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Organization"></type>
                     <element value="resource"></element>
                     <variable value="organization"></variable>
                     <condition value="('Organization' + '/' + $this.id) in %value.reference"></condition>
                  </source>
                  <dependent>
                     <name value="ReceiverCopyOrganizationToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="organization"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
               <rule>
                  <name value="patient"></name>
                  <source>
                     <context value="entry"></context>
                     <type value="Patient"></type>
                     <element value="resource"></element>
                     <variable value="patient"></variable>
                     <condition value="('Patient' + '/' + $this.id) in %value.reference"></condition>
                  </source>
                  <dependent>
                     <name value="ReceiverCopyPatientToQr"></name>
                     <variable value="bundle"></variable>
                     <variable value="composition"></variable>
                     <variable value="patient"></variable>
                     <variable value="item"></variable>
                  </dependent>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ReceiverCopyOrganizationToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="organization"></name>
         <type value="Organization"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="itemsender"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="organization"></name>
         <source>
            <context value="organization"></context>
         </source>
         <target>
            <context value="itemsender"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiverCopy"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="name"></name>
            <source>
               <context value="organization"></context>
               <element value="name"></element>
               <variable value="name"></variable>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiverCopy.organization.name"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueId value="name"></valueId>
               </parameter>
            </target>
            <documentation value="receiverCopy.organization.name"></documentation>
         </rule>
         <rule>
            <name value="contact"></name>
            <source>
               <context value="organization"></context>
               <element value="contact"></element>
               <variable value="contact"></variable>
            </source>
            <rule>
               <name value="name"></name>
               <source>
                  <context value="contact"></context>
                  <element value="name"></element>
                  <variable value="name"></variable>
               </source>
               <rule>
                  <name value="prefix"></name>
                  <source>
                     <context value="name"></context>
                     <element value="prefix"></element>
                     <variable value="prefix"></variable>
                     <condition value="(extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC')))"></condition>
                  </source>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="item"></element>
                     <variable value="item"></variable>
                  </target>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="linkId"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueString value="receiverCopy.title"></valueString>
                     </parameter>
                  </target>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="answer"></element>
                     <variable value="answer"></variable>
                  </target>
                  <target>
                     <context value="answer"></context>
                     <contextType value="variable"></contextType>
                     <element value="value"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueId value="prefix"></valueId>
                     </parameter>
                  </target>
                  <documentation value="receiverCopy.title"></documentation>
               </rule>
               <rule>
                  <name value="family"></name>
                  <source>
                     <context value="name"></context>
                     <element value="family"></element>
                     <variable value="family"></variable>
                  </source>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="item"></element>
                     <variable value="item"></variable>
                  </target>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="linkId"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueString value="receiverCopy.familyName"></valueString>
                     </parameter>
                  </target>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="answer"></element>
                     <variable value="answer"></variable>
                  </target>
                  <target>
                     <context value="answer"></context>
                     <contextType value="variable"></contextType>
                     <element value="value"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueId value="family"></valueId>
                     </parameter>
                  </target>
                  <documentation value="receiverCopy.familyName"></documentation>
               </rule>
               <rule>
                  <name value="given"></name>
                  <source>
                     <context value="name"></context>
                     <element value="given"></element>
                     <variable value="given"></variable>
                  </source>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="item"></element>
                     <variable value="item"></variable>
                  </target>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="linkId"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueString value="receiverCopy.givenName"></valueString>
                     </parameter>
                  </target>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="answer"></element>
                     <variable value="answer"></variable>
                  </target>
                  <target>
                     <context value="answer"></context>
                     <contextType value="variable"></contextType>
                     <element value="value"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueId value="given"></valueId>
                     </parameter>
                  </target>
                  <documentation value="receiverCopy.givenName"></documentation>
               </rule>
            </rule>
         </rule>
         <rule>
            <name value="phone"></name>
            <source>
               <context value="organization"></context>
               <element value="telecom"></element>
               <variable value="telecom"></variable>
               <condition value="(system = 'phone')"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiverCopy.phone"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="evaluate"></transform>
               <parameter>
                  <valueString value="telecom.value"></valueString>
               </parameter>
            </target>
            <documentation value="receiverCopy.phone"></documentation>
         </rule>
         <rule>
            <name value="email"></name>
            <source>
               <context value="organization"></context>
               <element value="telecom"></element>
               <variable value="telecom"></variable>
               <condition value="(system = 'email')"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiverCopy.email"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="evaluate"></transform>
               <parameter>
                  <valueString value="telecom.value"></valueString>
               </parameter>
            </target>
            <documentation value="receiverCopy.email"></documentation>
         </rule>
         <rule>
            <name value="addr"></name>
            <source>
               <context value="organization"></context>
               <element value="address"></element>
               <variable value="addr"></variable>
            </source>
            <rule>
               <name value="addrlinefirst"></name>
               <source>
                  <context value="addr"></context>
                  <element value="line"></element>
                  <listMode value="first"></listMode>
                  <variable value="line1"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.streetAddressLine"></valueString>
                  </parameter>
               </target>
               <rule>
                  <name value="line"></name>
                  <source>
                     <context value="addr"></context>
                     <element value="line"></element>
                     <variable value="line"></variable>
                  </source>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="answer"></element>
                     <variable value="answer"></variable>
                  </target>
                  <target>
                     <context value="answer"></context>
                     <contextType value="variable"></contextType>
                     <element value="value"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueId value="line"></valueId>
                     </parameter>
                  </target>
               </rule>
            </rule>
            <rule>
               <name value="postalCode"></name>
               <source>
                  <context value="addr"></context>
                  <element value="postalCode"></element>
                  <variable value="postalCode"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.postalCode"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="postalCode"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.postalCode"></documentation>
            </rule>
            <rule>
               <name value="city"></name>
               <source>
                  <context value="addr"></context>
                  <element value="city"></element>
                  <variable value="city"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.city"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="city"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.city"></documentation>
            </rule>
            <rule>
               <name value="country"></name>
               <source>
                  <context value="addr"></context>
                  <element value="country"></element>
                  <variable value="country"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.country"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="country"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.country"></documentation>
            </rule>
            <documentation value="receiverCopy.organization.streetAddressLine"></documentation>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ReceiverCopyPatientToQr"></name>
      <typeMode value="none"></typeMode>
      <input>
         <name value="bundle"></name>
         <type value="Bundle"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="composition"></name>
         <type value="Composition"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="patient"></name>
         <type value="Patient"></type>
         <mode value="source"></mode>
      </input>
      <input>
         <name value="itemsender"></name>
         <type value="BackboneElement"></type>
         <mode value="target"></mode>
      </input>
      <rule>
         <name value="patient"></name>
         <source>
            <context value="patient"></context>
         </source>
         <target>
            <context value="itemsender"></context>
            <contextType value="variable"></contextType>
            <element value="item"></element>
            <variable value="item"></variable>
         </target>
         <target>
            <context value="item"></context>
            <contextType value="variable"></contextType>
            <element value="linkId"></element>
            <transform value="copy"></transform>
            <parameter>
               <valueString value="receiverCopy"></valueString>
            </parameter>
         </target>
         <rule>
            <name value="name"></name>
            <source>
               <context value="patient"></context>
               <element value="name"></element>
               <variable value="name"></variable>
            </source>
            <rule>
               <name value="family"></name>
               <source>
                  <context value="name"></context>
                  <element value="family"></element>
                  <variable value="family"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.familyName"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="family"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.familyName"></documentation>
            </rule>
            <rule>
               <name value="given"></name>
               <source>
                  <context value="name"></context>
                  <element value="given"></element>
                  <variable value="given"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.givenName"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="given"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.givenName"></documentation>
            </rule>
            <rule>
               <name value="prefix"></name>
               <source>
                  <context value="name"></context>
                  <element value="prefix"></element>
                  <variable value="prefix"></variable>
                  <condition value="(extension.where((url = 'http://hl7.org/fhir/StructureDefinition/iso21090-EN-qualifier') and (valueCode = 'AC')))"></condition>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.title"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="prefix"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.title"></documentation>
            </rule>
         </rule>
         <rule>
            <name value="phone"></name>
            <source>
               <context value="patient"></context>
               <element value="telecom"></element>
               <variable value="telecom"></variable>
               <condition value="(system = 'phone')"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiverCopy.phone"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="evaluate"></transform>
               <parameter>
                  <valueString value="telecom.value"></valueString>
               </parameter>
            </target>
            <documentation value="receiverCopy.phone"></documentation>
         </rule>
         <rule>
            <name value="email"></name>
            <source>
               <context value="patient"></context>
               <element value="telecom"></element>
               <variable value="telecom"></variable>
               <condition value="(system = 'email')"></condition>
            </source>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="item"></element>
               <variable value="item"></variable>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="linkId"></element>
               <transform value="copy"></transform>
               <parameter>
                  <valueString value="receiverCopy.email"></valueString>
               </parameter>
            </target>
            <target>
               <context value="item"></context>
               <contextType value="variable"></contextType>
               <element value="answer"></element>
               <variable value="answer"></variable>
            </target>
            <target>
               <context value="answer"></context>
               <contextType value="variable"></contextType>
               <element value="value"></element>
               <transform value="evaluate"></transform>
               <parameter>
                  <valueString value="telecom.value"></valueString>
               </parameter>
            </target>
            <documentation value="receiverCopy.email"></documentation>
         </rule>
         <rule>
            <name value="addr"></name>
            <source>
               <context value="patient"></context>
               <element value="address"></element>
               <variable value="addr"></variable>
            </source>
            <rule>
               <name value="addrlinefirst"></name>
               <source>
                  <context value="addr"></context>
                  <element value="line"></element>
                  <listMode value="first"></listMode>
                  <variable value="line1"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.streetAddressLine"></valueString>
                  </parameter>
               </target>
               <rule>
                  <name value="line"></name>
                  <source>
                     <context value="addr"></context>
                     <element value="line"></element>
                     <variable value="line"></variable>
                  </source>
                  <target>
                     <context value="item"></context>
                     <contextType value="variable"></contextType>
                     <element value="answer"></element>
                     <variable value="answer"></variable>
                  </target>
                  <target>
                     <context value="answer"></context>
                     <contextType value="variable"></contextType>
                     <element value="value"></element>
                     <transform value="copy"></transform>
                     <parameter>
                        <valueId value="line"></valueId>
                     </parameter>
                  </target>
               </rule>
            </rule>
            <rule>
               <name value="postalCode"></name>
               <source>
                  <context value="addr"></context>
                  <element value="postalCode"></element>
                  <variable value="postalCode"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.postalCode"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="postalCode"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.postalCode"></documentation>
            </rule>
            <rule>
               <name value="city"></name>
               <source>
                  <context value="addr"></context>
                  <element value="city"></element>
                  <variable value="city"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.city"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="city"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.city"></documentation>
            </rule>
            <rule>
               <name value="country"></name>
               <source>
                  <context value="addr"></context>
                  <element value="country"></element>
                  <variable value="country"></variable>
               </source>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="item"></element>
                  <variable value="item"></variable>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="linkId"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueString value="receiverCopy.country"></valueString>
                  </parameter>
               </target>
               <target>
                  <context value="item"></context>
                  <contextType value="variable"></contextType>
                  <element value="answer"></element>
                  <variable value="answer"></variable>
               </target>
               <target>
                  <context value="answer"></context>
                  <contextType value="variable"></contextType>
                  <element value="value"></element>
                  <transform value="copy"></transform>
                  <parameter>
                     <valueId value="country"></valueId>
                  </parameter>
               </target>
               <documentation value="receiverCopy.country"></documentation>
            </rule>
            <documentation value="receiverCopy.organization.streetAddressLine"></documentation>
         </rule>
      </rule>
   </group>
</StructureMap>