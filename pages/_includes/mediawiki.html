<p>Implementation Guide <b>CH-ORF</b> - <b>Version 0.9.0 (22.01.2019)</b>.</p>
<p><a href="http://e-health-wiki.ch/index.php/CH-ORF" >see also http://e-health-wiki.ch/index.php/CH-ORF</a></p>
</p>
<div id="toc" class="toc">
    <div class="toctitle" lang="en-GB" dir="ltr">
        <h2>Contents</h2>
    </div>
    <ul>
        <li class="toclevel-1"><a href="#Impressum"><span class="tocnumber">1</span> <span class="toctext">Impressum</span></a></li>
        <li class="toclevel-1 tocsection-1"><a href="#Volume_1_.E2.80.93_Order_.26_Referral_by_Form_.28CH:ORF.29_Implementation_Guide"><span
                    class="tocnumber">2</span> <span class="toctext">Volume 1 – Order &amp; Referral by Form
                    (CH:ORF) Implementation Guide</span></a>
            <ul>
                <li class="toclevel-2 tocsection-2"><a href="#ORF_Actors.2C_Transactions.2C_and_Content_Modules"><span
                            class="tocnumber">2.1</span> <span class="toctext">ORF Actors, Transactions, and
                            Content Modules</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-3"><a href="#ORF_Actor_Descriptions_and_Actor_Requirements"><span
                                    class="tocnumber">2.1.1</span> <span class="toctext">ORF Actor Descriptions and
                                    Actor Requirements</span></a></li>
                    </ul>
                </li>
                <li class="toclevel-2 tocsection-4"><a href="#ORF_Actor_Options"><span class="tocnumber">2.2</span>
                        <span class="toctext">ORF Actor Options</span></a></li>
                <li class="toclevel-2 tocsection-5"><a href="#ORF_Required_Actor_Groupings"><span class="tocnumber">2.3</span>
                        <span class="toctext">ORF Required Actor Groupings</span></a></li>
                <li class="toclevel-2 tocsection-6"><a href="#ORF_Overview"><span class="tocnumber">2.4</span>
                        <span class="toctext">ORF Overview</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-7"><a href="#Use_Cases"><span class="tocnumber">2.4.1</span>
                                <span class="toctext">Use Cases</span></a>
                            <ul>
                                <li class="toclevel-4 tocsection-8"><a href="#Use_Case_.231:_Questionnaire_Creation"><span
                                            class="tocnumber">2.4.1.1</span> <span class="toctext">Use Case #1:
                                            Questionnaire Creation</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-9"><a href="#Questionnaire_Creation_Use_Case_Description"><span
                                                    class="tocnumber">2.4.1.1.1</span> <span class="toctext">Questionnaire
                                                    Creation Use Case Description</span></a></li>
                                        <li class="toclevel-5 tocsection-10"><a href="#Questionnaire_Creation_Process_Flow"><span
                                                    class="tocnumber">2.4.1.1.2</span> <span class="toctext">Questionnaire
                                                    Creation Process Flow</span></a></li>
                                        <li class="toclevel-5 tocsection-11"><a href="#Questionnaire_Deployment_Process_Flow"><span
                                                    class="tocnumber">2.4.1.1.3</span> <span class="toctext">Questionnaire
                                                    Deployment Process Flow</span></a></li>
                                        <li class="toclevel-5 tocsection-12"><a href="#Questionnaire_Usage_Process_Flow"><span
                                                    class="tocnumber">2.4.1.1.4</span> <span class="toctext">Questionnaire
                                                    Usage Process Flow</span></a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="toclevel-2 tocsection-13"><a href="#ORF_Security_Considerations"><span class="tocnumber">2.5</span>
                        <span class="toctext">ORF Security Considerations</span></a></li>
            </ul>
        </li>
        <li class="toclevel-1 tocsection-14"><a href="#Volume_2_.E2.80.93_Transactions"><span class="tocnumber">3</span>
                <span class="toctext">Volume 2 – Transactions</span></a>
            <ul>
                <li class="toclevel-2 tocsection-15"><a href="#Query_Questionnaire_.5BCH:ORF-1.5D"><span class="tocnumber">3.1</span>
                        <span class="toctext">Query Questionnaire [CH:ORF-1]</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-16"><a href="#Scope"><span class="tocnumber">3.1.1</span>
                                <span class="toctext">Scope</span></a></li>
                        <li class="toclevel-3 tocsection-17"><a href="#Actor_Roles"><span class="tocnumber">3.1.2</span>
                                <span class="toctext">Actor Roles</span></a></li>
                        <li class="toclevel-3 tocsection-18"><a href="#Referenced_Standards"><span class="tocnumber">3.1.3</span>
                                <span class="toctext">Referenced Standards</span></a></li>
                        <li class="toclevel-3 tocsection-19"><a href="#Interaction_Diagram"><span class="tocnumber">3.1.4</span>
                                <span class="toctext">Interaction Diagram</span></a>
                            <ul>
                                <li class="toclevel-4 tocsection-20"><a href="#Query_Questionnaire_Resource_Request"><span
                                            class="tocnumber">3.1.4.1</span> <span class="toctext">Query
                                            Questionnaire Resource Request</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-21"><a href="#Trigger_Events"><span class="tocnumber">3.1.4.1.1</span>
                                                <span class="toctext">Trigger Events</span></a></li>
                                        <li class="toclevel-5 tocsection-22"><a href="#Message_Semantics"><span class="tocnumber">3.1.4.1.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a>
                                            <ul>
                                                <li class="toclevel-6 tocsection-23"><a href="#Query_Search_Parameters"><span
                                                            class="tocnumber">3.1.4.1.2.1</span> <span class="toctext">Query
                                                            Search Parameters</span></a></li>
                                                <li class="toclevel-6 tocsection-24"><a href="#Populating_Expected_Response_Format"><span
                                                            class="tocnumber">3.1.4.1.2.2</span> <span class="toctext">Populating
                                                            Expected Response Format</span></a></li>
                                            </ul>
                                        </li>
                                        <li class="toclevel-5 tocsection-25"><a href="#Expected_Actions"><span class="tocnumber">3.1.4.1.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-26"><a href="#Query_Questionnaire_Resource_Response"><span
                                            class="tocnumber">3.1.4.2</span> <span class="toctext">Query
                                            Questionnaire Resource Response</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-27"><a href="#Trigger_Events_2"><span class="tocnumber">3.1.4.2.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-28"><a href="#Message_Semantics_2"><span class="tocnumber">3.1.4.2.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a>
                                            <ul>
                                                <li class="toclevel-6 tocsection-29"><a href="#Questionnaire_Resource_Definition_in_the_Context_of_Query_Questionnaire_Resource_Response"><span
                                                            class="tocnumber">3.1.4.2.2.1</span> <span class="toctext">Questionnaire
                                                            Resource Definition in the Context of Query
                                                            Questionnaire Resource Response</span></a></li>
                                                <li class="toclevel-6 tocsection-30"><a href="#Resource_Bundling"><span
                                                            class="tocnumber">3.1.4.2.2.2</span> <span class="toctext">Resource
                                                            Bundling</span></a></li>
                                            </ul>
                                        </li>
                                        <li class="toclevel-5 tocsection-31"><a href="#Conformance_Resource"><span
                                                    class="tocnumber">3.1.4.2.3</span> <span class="toctext">Conformance
                                                    Resource</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-32"><a href="#Retrieve_Questionnaire_Resource_Request"><span
                                            class="tocnumber">3.1.4.3</span> <span class="toctext">Retrieve
                                            Questionnaire Resource Request</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-33"><a href="#Trigger_Events_3"><span class="tocnumber">3.1.4.3.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-34"><a href="#Message_Semantics_3"><span class="tocnumber">3.1.4.3.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a></li>
                                        <li class="toclevel-5 tocsection-35"><a href="#Expected_Actions_2"><span class="tocnumber">3.1.4.3.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-36"><a href="#Retrieve_Questionnaire_Resource_Response"><span
                                            class="tocnumber">3.1.4.4</span> <span class="toctext">Retrieve
                                            Questionnaire Resource Response</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-37"><a href="#Trigger_Events_4"><span class="tocnumber">3.1.4.4.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-38"><a href="#Message_Semantics_4"><span class="tocnumber">3.1.4.4.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a>
                                            <ul>
                                                <li class="toclevel-6 tocsection-39"><a href="#Questionnaire_Resource_Definition_in_the_Context_of_Retrieve_Questionnaire_Resource_Response"><span
                                                            class="tocnumber">3.1.4.4.2.1</span> <span class="toctext">Questionnaire
                                                            Resource Definition in the Context of Retrieve
                                                            Questionnaire Resource Response</span></a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="toclevel-2 tocsection-40"><a href="#Store_Questionnaire_.5BCH:ORF-2.5D"><span class="tocnumber">3.2</span>
                        <span class="toctext">Store Questionnaire [CH:ORF-2]</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-41"><a href="#Scope_2"><span class="tocnumber">3.2.1</span>
                                <span class="toctext">Scope</span></a></li>
                        <li class="toclevel-3 tocsection-42"><a href="#Actor_Roles_2"><span class="tocnumber">3.2.2</span>
                                <span class="toctext">Actor Roles</span></a></li>
                        <li class="toclevel-3 tocsection-43"><a href="#3.2.3_Referenced_Standards"><span class="tocnumber">3.2.3</span>
                                <span class="toctext">3.2.3 Referenced Standards</span></a></li>
                        <li class="toclevel-3 tocsection-44"><a href="#Interaction_Diagram_2"><span class="tocnumber">3.2.4</span>
                                <span class="toctext">Interaction Diagram</span></a>
                            <ul>
                                <li class="toclevel-4 tocsection-45"><a href="#Store_Questionnaire_Resource_Request"><span
                                            class="tocnumber">3.2.4.1</span> <span class="toctext">Store
                                            Questionnaire Resource Request</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-46"><a href="#Trigger_Events_5"><span class="tocnumber">3.2.4.1.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-47"><a href="#Message_Semantics_5"><span class="tocnumber">3.2.4.1.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a></li>
                                        <li class="toclevel-5 tocsection-48"><a href="#Expected_Actions_3"><span class="tocnumber">3.2.4.1.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-49"><a href="#Store_Questionnaire_Resource_response"><span
                                            class="tocnumber">3.2.4.2</span> <span class="toctext">Store
                                            Questionnaire Resource response</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-50"><a href="#Trigger_Events_6"><span class="tocnumber">3.2.4.2.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-51"><a href="#Message_Semantics_6"><span class="tocnumber">3.2.4.2.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a></li>
                                        <li class="toclevel-5 tocsection-52"><a href="#Expected_Actions_4"><span class="tocnumber">3.2.4.2.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-53"><a href="#Conformance_Resource_2"><span class="tocnumber">3.2.4.3</span>
                                        <span class="toctext">Conformance Resource</span></a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="toclevel-2 tocsection-54"><a href="#Retrieve_Bundle_.5BCH:ORF-3.5D"><span class="tocnumber">3.3</span>
                        <span class="toctext">Retrieve Bundle [CH:ORF-3]</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-55"><a href="#Scope_3"><span class="tocnumber">3.3.1</span>
                                <span class="toctext">Scope</span></a></li>
                        <li class="toclevel-3 tocsection-56"><a href="#Actor_Roles_3"><span class="tocnumber">3.3.2</span>
                                <span class="toctext">Actor Roles</span></a></li>
                        <li class="toclevel-3 tocsection-57"><a href="#Referenced_Standards_2"><span class="tocnumber">3.3.3</span>
                                <span class="toctext">Referenced Standards</span></a></li>
                        <li class="toclevel-3 tocsection-58"><a href="#Interaction_Diagram_3"><span class="tocnumber">3.3.4</span>
                                <span class="toctext">Interaction Diagram</span></a>
                            <ul>
                                <li class="toclevel-4 tocsection-59"><a href="#Retrieve_Bundle_Operation"><span class="tocnumber">3.3.4.1</span>
                                        <span class="toctext">Retrieve Bundle
                                            Operation</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-60"><a href="#Trigger_Events_7"><span class="tocnumber">3.3.4.1.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-61"><a href="#Message_Semantics_7"><span class="tocnumber">3.3.4.1.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a></li>
                                        <li class="toclevel-5 tocsection-62"><a href="#Expected_Actions_5"><span class="tocnumber">3.3.4.1.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-63"><a href="#Retrieve_Bundle_Response"><span class="tocnumber">3.3.4.2</span>
                                        <span class="toctext">Retrieve Bundle
                                            Response</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-64"><a href="#Trigger_Events_8"><span class="tocnumber">3.3.4.2.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-65"><a href="#Message_Semantics_8"><span class="tocnumber">3.3.4.2.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a></li>
                                        <li class="toclevel-5 tocsection-66"><a href="#Expected_Actions_6"><span class="tocnumber">3.3.4.2.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-67"><a href="#Conformance_Resource_3"><span class="tocnumber">3.3.4.3</span>
                                        <span class="toctext">Conformance Resource</span></a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="toclevel-2 tocsection-68"><a href="#Submit_Bundle_.5BCH:ORF-4.5D"><span class="tocnumber">3.4</span>
                        <span class="toctext">Submit Bundle [CH:ORF-4]</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-69"><a href="#Scope_4"><span class="tocnumber">3.4.1</span>
                                <span class="toctext">Scope</span></a></li>
                        <li class="toclevel-3 tocsection-70"><a href="#Actor_Roles_4"><span class="tocnumber">3.4.2</span>
                                <span class="toctext">Actor Roles</span></a></li>
                        <li class="toclevel-3 tocsection-71"><a href="#Referenced_Standard"><span class="tocnumber">3.4.3</span>
                                <span class="toctext">Referenced Standard</span></a></li>
                        <li class="toclevel-3 tocsection-72"><a href="#Interaction_Diagram_4"><span class="tocnumber">3.4.4</span>
                                <span class="toctext">Interaction Diagram</span></a>
                            <ul>
                                <li class="toclevel-4 tocsection-73"><a href="#Submit_Bundle"><span class="tocnumber">3.4.4.1</span>
                                        <span class="toctext">Submit Bundle</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-74"><a href="#Trigger_Events_9"><span class="tocnumber">3.4.4.1.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-75"><a href="#Message_Semantics_9"><span class="tocnumber">3.4.4.1.2</span>
                                                <span class="toctext">Message
                                                    Semantics</span></a>
                                            <ul>
                                                <li class="toclevel-6 tocsection-76"><a href="#Bundle_Resources"><span
                                                            class="tocnumber">3.4.4.1.2.1</span> <span class="toctext">Bundle
                                                            Resources</span></a></li>
                                            </ul>
                                        </li>
                                        <li class="toclevel-5 tocsection-77"><a href="#Expected_Actions_7"><span class="tocnumber">3.4.4.1.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-78"><a href="#Status_Message"><span class="tocnumber">3.4.4.2</span>
                                        <span class="toctext">Status Message</span></a>
                                    <ul>
                                        <li class="toclevel-5 tocsection-79"><a href="#Trigger_Events_10"><span class="tocnumber">3.4.4.2.1</span>
                                                <span class="toctext">Trigger
                                                    Events</span></a></li>
                                        <li class="toclevel-5 tocsection-80"><a href="#Message_Semantics_10"><span
                                                    class="tocnumber">3.4.4.2.2</span> <span class="toctext">Message
                                                    Semantics</span></a></li>
                                        <li class="toclevel-5 tocsection-81"><a href="#Expected_Actions_8"><span class="tocnumber">3.4.4.2.3</span>
                                                <span class="toctext">Expected
                                                    Actions</span></a></li>
                                    </ul>
                                </li>
                                <li class="toclevel-4 tocsection-82"><a href="#Conformance_Resource_4"><span class="tocnumber">3.4.4.3</span>
                                        <span class="toctext">Conformance Resource</span></a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="toclevel-1 tocsection-83"><a href="#Volume_3_.E2.80.93_Content_Modules"><span class="tocnumber">4</span>
                <span class="toctext">Volume 3 – Content Modules</span></a>
            <ul>
                <li class="toclevel-2 tocsection-84"><a href="#Questionnaire_Content"><span class="tocnumber">4.1</span>
                        <span class="toctext">Questionnaire Content</span></a></li>
                <li class="toclevel-2 tocsection-85"><a href="#Mandatory_given_elements_of_a_questionnaire"><span class="tocnumber">4.2</span>
                        <span class="toctext">Mandatory given elements of a
                            questionnaire</span></a></li>
                <li class="toclevel-2 tocsection-86"><a href="#Optional_given_elements_of_a_questionnaire_.28One_of_them_shall_be_provided.29"><span
                            class="tocnumber">4.3</span> <span class="toctext">Optional given elements of a
                            questionnaire (One of them shall be provided)</span></a></li>
                <li class="toclevel-2 tocsection-87"><a href="#FHIR_Representation"><span class="tocnumber">4.4</span>
                        <span class="toctext">FHIR Representation</span></a>
                    <ul>
                        <li class="toclevel-3 tocsection-88"><a href="#FHIR_Resources_Constraints"><span class="tocnumber">4.4.1</span>
                                <span class="toctext">FHIR Resources Constraints</span></a>
                            <ul>
                                <li class="toclevel-4 tocsection-89"><a href="#Composition_resource"><span class="tocnumber">4.4.1.1</span>
                                        <span class="toctext">Composition resource</span></a></li>
                                <li class="toclevel-4 tocsection-90"><a href="#Questionnaire_resource"><span class="tocnumber">4.4.1.2</span>
                                        <span class="toctext">Questionnaire resource</span></a></li>
                                <li class="toclevel-4 tocsection-91"><a href="#QuestionnaireResponse_resource"><span
                                            class="tocnumber">4.4.1.3</span> <span class="toctext">QuestionnaireResponse
                                            resource</span></a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div>


<p><b><a href="/index.php?title=@namespace:ElektronischeVersion&amp;action=edit&amp;redlink=1" class="new" title="@namespace:ElektronischeVersion (Seite nicht vorhanden)">Elektronische
            Version</a></b>
</p>
<div class="print-document-part remove-when-online"><a href="/index.php?title=@namespace:ElektronischeVersion&amp;action=edit&amp;redlink=1"
        class="new" title="@namespace:ElektronischeVersion (Seite nicht vorhanden)">@namespace:ElektronischeVersion</a></div>
<p><br />
    <b>Order &amp; Referral by Form - Implementation Guide</b>
    <b>(CH:ORF)<br /></b>
</p>
<p><b>Introduction to this Implementation Guide</b>
</p>
<p>This Implementation Guide uses FHIR defined resources – Composition Resource, Questionnaire Resource,
    QuestionnaireResponse Resource, Patient Resource, Practitioner Resource, ServiceRequest Resource, ImagingStudy
    Resource, OperationOutcome Resource and Bundle from FHIR R4. For details on HL7 FHIR R4 see <a rel="nofollow" class="external free"
        href="http://hl7.org/fhir/r4">http://hl7.org/fhir/r4</a>.
</p>
<p>The Order &amp; Referral by Form (ORF) Implementation Guide describes how forms for eReferrals, requests for
    information (such as diagnostic imaging results, lab results, discharge reports etc.) can be defined, deployed
    and used in order to achieve a syntactical and semantically consistent cross enterprise information exchange.
</p>
<p>The Implementation Guide supports creation and domain wide deployment of forms for structured and coded
    information exchange as well as exchange of such forms for referral, orders etc. The Implementation Guide
    relies on FHIR e.g. the questionnaire resource. Because the Implementation Guide relies heavily on the FHIR
    Resources Questionnaire and QuestionnaireResponse, forms are addressed here as Questionnaires.
</p>
<p>This Implementation Guide is derived from the HL7 Structured Data Capture Implementation Guide, see <a rel="nofollow"
        class="external text" href="http://build.fhir.org/ig/HL7/sdc/">SDC IG</a> and uses the Swiss Core Profiles,
    see <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/hl7ch/ch-core/index.html">CH-Core</a>.
</p>
<p><br />
</p>
<h1><span id="Volume_1_–_Order_&amp;_Referral_by_Form_(CH:ORF)_Implementation_Guide"></span><span class="mw-headline"
        id="Volume_1_.E2.80.93_Order_.26_Referral_by_Form_.28CH:ORF.29_Implementation_Guide">Volume 1 – Order &amp;
        Referral by Form (CH:ORF) Implementation Guide</span></h1>
<p>This Implementation Guide concerns directional information exchange between institutions such as requests for
    referral, requests for previous imaging results, requests for second opinions etc. as well as corresponding
    responses. Such request are often done – or could be done – by means of structured forms. The same may apply
    for responses or documents coming along in case the response consists of a particular payload (e.g. exam
    results). However, forms for these purposes are in general proprietary constructs and seldom suitable for
    further machine processing. Furthermore, such forms are more or less hard coded and concerned systems may not
    easily be updated for new use cases.
</p>
<p>The ORF Implementation Guide addresses two issues:
</p>
<ol>
    <li>It supports a scenario where an authority (e. g. health authority, expert panel etc.) defines a set of
        forms (here called Questionnaires) for well-defined use cases which then are deployed in a specific
        enterprise, domain etc. or even nationwide.</li>
    <li>New use cases or changes in use cases can easily be handled either by modification of existing
        Questionnaires or new ones. The Implementation Guide itself is agnostic to the nature of a particular
        Questionnaire and the ORF Implementation Guide puts only little limits on its definition.</li>
</ol>
<p>Venders implementing the ORF Implementation Guide benefit of a high re-use potential. Applications which support
    the ORF Implementation Guide may be used for various settings of directional information exchange. The specific
    needs of a particular use case will be covered by a adequate design of the Questionnaire and the value sets
    being used.
</p>
<p>When writing the ORF Implementation Guide, the authors had the following use case in mind: A human fills in a
    Questionnaire for a particular request and sends this Questionnaire to a receiver. There, a human reads the
    Questionnaire with its content. A corresponding response will work in the same way. There is possibly some
    payload coming with the Questionnaire: A request may be accompanied by results of preceding exams (e.g. images,
    reports); the response may be a diagnostic result.
</p>
<p>The primary aim of the ORF Implementation Guide is to assure a consistent representation of Questionnaires at
    both – filler- and receiver – site. But there is the need for further machine processing: at filler site in
    terms of prepopulating attributes with content from other applications (e.g. demographic data of a patient)
    whereas the receiver may want to have the content of the form ready for further processing in his applications.
    Obviously the two aims – semantic interoperability and flexibility in the definition of Questionnaires – are
    contradictory. The ORF Implementation Guide addresses this problem by a mandatory set of mandatory given
    elements and codes with defined meaning which are part of every Questionnaire in the ORF Implementation Guide.
    It is up to the Questionnaire Creator to create Questionnaires with additional use case specific elements.
</p>
<p>Applications claiming for conformance with the ORF Implementation Guide shall:
</p>
<ul>
    <li>Render (and in case of the Questionnaire filler allow for data entry) all elements of a questionnaire in
        the user interface (e.g. on screen, in print). Grouping of elements and the order of groups and elements
        within shall be adequately reproduced according to the Questionnaire.</li>
    <li>Be able to process all codes related to the mandatory given elements in a Questionnaire.</li>
</ul>
<p>Venders of applications with Questionnaire Filler/Questionnaire Receiver Actors are strongly recommended to
    implement interfaces to other applications (such as HIS and PACS) for all data in the mandatory given elements
    of Questionnaires.
</p>
<p>Applications designed like this will provide out-of-the-box interconnectivity for mandatory given elements as
    well as out-of-the-box interoperability for all questionnaires as far it concerns user interfaces at filler and
    receiver site.
</p>
<p>Nothing speaks against interfaces for data in the use case specific part of a particular Questionnaire. One has
    however to keep in mind, that such interfaces are tied to a specific questionnaire. Ownership or other means,
    which prevent changes of the questionnaire by third parties, are therefore advisable.
</p>
<p>The ORF Implementation Guide deals with Transport, Workflow and Content. It is based on FHIR resources and in
    particular the FHIR Questionnaire resource. FHIR specifies RESTful Web services as a mean for transport.&#160;
    An implementation based on RESTful Web services is strongly recommended however not mandatory to comply with
    the ORF Implementation Guide. Workflow is addressed by the scope of ORF Implementation Guide which addresses
    directional information exchange with request and response. Content is defined by a set of mandatory mandatory
    given elements and codes and the possibility to extend both as required by the use cases addressed.
</p>
<h2><span id="ORF_Actors,_Transactions,_and_Content_Modules"></span><span class="mw-headline" id="ORF_Actors.2C_Transactions.2C_and_Content_Modules">ORF
        Actors, Transactions, and Content Modules</span></h2>
<p>This section defines the actors, transactions, and/or content modules in this Implementation Guide.
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actor
            </th>
            <th>Definition
            </th>
        </tr>
        <tr>
            <td>Questionnaire Creator
            </td>
            <td>A system that generates Questionnaires, corresponds to the <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/sdc-form-designer.html">SDC
                    Form Designer</a>.
            </td>
        </tr>
        <tr>
            <td>Questionnaire Filler
            </td>
            <td>A system that renders Questionnaires and allows for filling in. The Questionnaire Filler is also
                responsible for filling in the corresponding resources in the Bundle, corresponds to the <a rel="nofollow"
                    class="external text" href="http://build.fhir.org/ig/HL7/sdc/sdc-form-filler.html">SDC Form
                    Designer</a>.
            </td>
        </tr>
        <tr>
            <td>Questionnaire Manager
            </td>
            <td>A system that assembles a Bundle containing the resources according to the Questionnaire. The
                Questionnaire Manager may also populate elements of the questionnaire and the corresponding
                resources where appropriate, corresponds to the <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/sdc-form-manager.html">SDC
                    Form Manager</a>.
            </td>
        </tr>
        <tr>
            <td>Questionnaire Receiver
            </td>
            <td>A system that receives a Bundle (according to the Questionnaire) from a Questionnaire filler and
                renders it, corresponds to the <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/sdc-form-receiver.html">SDC
                    Form Receiver</a>.
            </td>
        </tr>
        <tr>
            <td>Questionnaire Processor
            </td>
            <td>The Questionnaire Processor is an integrated Questionnaire Manager, Questionnaire Receiver and
                Questionnaire Filler, supporting all of the transactions and options of those actors.
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table1_1-0" class="reference"><a href="#cite_note-Table1-1">&#91;Table 1&#93;</a></sup> <i>Actors
        in the ORF Implementation Guide</i>
</p>
<p><sup id="cite_ref-Figure1_2-0" class="reference"><a href="#cite_note-Figure1-2">&#91;Figure 1&#93;</a></sup>
    shows the actors directly involved in the ORF Implementation Guide and the relevant transactions between them.
    Actors which have a mandatory grouping are shown in conjoined boxes.
</p>
<p><a href="assets/images/ChOrfQuestionnaireHandlingActorDiagram.svg" class="image"><img src="assets/images/ChOrfQuestionnaireHandlingActorDiagram.svg"
            width="700" height="650" class="img-on-screen" </a> </p> <p><sup id="cite_ref-Figure1_2-1" class="reference"><a
                href="#cite_note-Figure1-2">&#91;Figure 1&#93;</a></sup> <i>Questionnaire
            Handling Actor Diagram</i>
</p>
<p><sup id="cite_ref-Table2_3-0" class="reference"><a href="#cite_note-Table2-3">&#91;Table 2&#93;</a></sup> lists
    the transactions for each actor directly involved in the Order &amp; Referral by Form (ORF) Implementation
    Guide. To claim compliance with this Implementation Guide, an actor shall support all required transactions
    (labeled “R”) and may support the optional transactions (labeled “O”).
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actors
            </th>
            <th>Transactions
            </th>
            <th>Optionality
            </th>
            <th>Reference
            </th>
        </tr>
        <tr>
            <td rowspan="3">Questionnaire Creator
            </td>
            <td>Query Questionnaire [CH:ORF-1]
            </td>
            <td>R
            </td>
            <td>3.1
            </td>
        </tr>
        <tr>
            <td>Retrieve Questionnaire [CH:ORF-1]
            </td>
            <td>R
            </td>
            <td>3.1
            </td>
        </tr>
        <tr>
            <td>Store Questionnaire [CH:ORF-2]
            </td>
            <td>R
            </td>
            <td>3.2
            </td>
        </tr>
        <tr>
            <td rowspan="3">Questionnaire Manager
            </td>
            <td>Query Questionnaire [CH:ORF-1]
            </td>
            <td>R
            </td>
            <td>3.1
            </td>
        </tr>
        <tr>
            <td>Store Questionnaire [CH:ORF-2]<br />
                <p>(required for Stand alone Questionnaire Manager only,<br />
                    for Questionnaire Managers grouped in a<br />
                    Questionnaire Processor optional)
                </p>
            </td>
            <td>O
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>Retrieve Bundle [CH:ORF-3]
            </td>
            <td>R
            </td>
            <td>3.3
            </td>
        </tr>
        <tr>
            <td rowspan="2">Questionnaire Filler
            </td>
            <td>Retrieve Questionnaire [CH:ORF-1]
            </td>
            <td>R
            </td>
            <td>3.1
            </td>
        </tr>
        <tr>
            <td>Submit Bundle [CH:ORF-4]
            </td>
            <td>O
            </td>
            <td>3.4
            </td>
        </tr>
        <tr>
            <td>Questionnaire Receiver
            </td>
            <td>Submit Bundle[CH:ORF-4]
            </td>
            <td>O
            </td>
            <td>3.4
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table2_3-1" class="reference"><a href="#cite_note-Table2-3">&#91;Table 2&#93;</a></sup> <i>Actors
        in the ORF Implementation Guide</i>
</p>
<p><sup id="cite_ref-Figure1_2-2" class="reference"><a href="#cite_note-Figure1-2">&#91;Figure 1&#93;</a></sup>
    shows the actors directly involved in the ORF Implementation Guide and the direction that the content is
    exchanged.
</p>
<p>The diagram with the transactions [CH:ORF-1], [CH:ORF-2], [CH:ORF-3], [CH:ORF-4] and the corresponding actors
    are a specialization/subset of the <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/workflow.html">SDC
        workflow</a>, except that for the transactions [CH:ORF-3],[CH:ORF-4] a Bundle with a QuestionnaireResponse
    is specified instead of the QuestionnaireResponse alone. Todo: Should this also be harmonized?
</p>
<p>The Submit Bundle transaction is marked as optional to allow solutions which choose a different communication
    transaction method like IHE XDS, XDR, XMD to be conform with this Implementation Guide.
</p>
<p>A product implementation using this Implementation Guide group actors from this with actors from a workflow or
    transport Implementation Guide to be functional. The grouping of the content module described in this
    Implementation Guide to specific actors is described in more detail in the “Required Actor Groupings” section
    below.
</p>
<p><sup id="cite_ref-Table3_4-0" class="reference"><a href="#cite_note-Table3-4">&#91;Table 3&#93;</a></sup> lists
    the content module defined in the Order &amp; Referral by Form (ORF)) Implementation Guide. To claim support
    with this Implementation Guide, an actor shall support all required content modules (labeled “R”) and may
    support optional content modules (labeled “O”). The content module is based on the [Swiss core] profiles.
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actors
            </th>
            <th>Content Modules
            </th>
            <th>Optionality
            </th>
            <th>Reference
            </th>
        </tr>
        <tr>
            <td>Questionnaire Filler
            </td>
            <td>ORF Content Module <sup id="cite_ref-Note1_5-0" class="reference"><a href="#cite_note-Note1-5">&#91;Note
                        1&#93;</a></sup>
            </td>
            <td>R
            </td>
            <td>Vol 3
            </td>
        </tr>
        <tr>
            <td>Questionnaire Receiver
            </td>
            <td>ORF Content Module <sup id="cite_ref-Note1_5-1" class="reference"><a href="#cite_note-Note1-5">&#91;Note
                        1&#93;</a></sup>
            </td>
            <td>R <sup id="cite_ref-Note1_5-2" class="reference"><a href="#cite_note-Note1-5">&#91;Note 1&#93;</a></sup>
            </td>
            <td>Vol 3
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table3_4-1" class="reference"><a href="#cite_note-Table3-4">&#91;Table 3&#93;</a></sup> <i>Order
        &amp; Referral by Form (ORF) Implementation Guide - Actors and Content Modules</i>
</p>
<p><sup id="cite_ref-Note1_5-3" class="reference"><a href="#cite_note-Note1-5">&#91;Note 1&#93;</a></sup><i>The
        content of the form depends on the form which itself is defined by the FHIR Questionnaire The FHIR
        Questionnaire defines elements and structure of the form. Codes for coded attributes are provided with a
        corresponding value set (details see ORF Content Module)</i>
</p>
<h3><span class="mw-headline" id="ORF_Actor_Descriptions_and_Actor_Requirements">ORF Actor Descriptions and Actor
        Requirements</span></h3>
<p>Most requirements are documented in Transactions (Volume 2) and Content Modules (Volume 3). This section
    documents any additional requirements on Implementation Guide's actors.
</p>
<p>Questionnaire Filler and Questionnaire Receiver Actors may be implemented on a mobile device, although this is
    not the primary setting in mind. All other Actors will rather be implemented in a stationary setting because
    the use case addressed involve mostly stationary applications.
</p>
<h2><span class="mw-headline" id="ORF_Actor_Options">ORF Actor Options</span></h2>
<p>Options that may be selected for each actor in this profile, if any, are listed in <sup id="cite_ref-Table4_6-0"
        class="reference"><a href="#cite_note-Table4-6">&#91;Table 4&#93;</a></sup>. Dependencies between options
    when applicable are specified in notes.
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actor
            </th>
            <th>Option Name
            </th>
            <th>Reference
            </th>
        </tr>
        <tr>
            <td>Questionnaire Creator
            </td>
            <td>No options defined
            </td>
            <td>--
            </td>
        </tr>
        <tr>
            <td>Questionnaire Manager
            </td>
            <td>No options defined
            </td>
            <td>--
            </td>
        </tr>
        <tr>
            <td>Questionnaire Filler
            </td>
            <td>No options defined
            </td>
            <td>--
            </td>
        </tr>
        <tr>
            <td>Questionnaire Receiver
            </td>
            <td>No options defined
            </td>
            <td>--
            </td>
        </tr>
        <tr>
            <td>Questionnaire Processor
            </td>
            <td>No options defined
            </td>
            <td>--
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table4_6-1" class="reference"><a href="#cite_note-Table4-6">&#91;Table 4&#93;</a></sup><i>ORF
        - Actors and Options</i>
</p>
<h2><span class="mw-headline" id="ORF_Required_Actor_Groupings">ORF Required Actor Groupings</span></h2>
<p>An Actor from this Implementation Guide (Column 1) shall implement all of the required transactions and/or
    content modules in this profile <i><b>in addition to</b></i> all of the transactions required for the grouped
    actor (Column 2).
</p>
<p>If this is a content module, and actors from this Implementation Guide are grouped with actors from a workflow
    or transport profile, the Content Bindings reference column references any specifications for mapping data from
    the content module into data elements from the workflow or transport transactions.
</p>
<p>In some cases, required groupings are defined as at least one of an enumerated set of possible actors; this is
    designated by merging column one into a single cell spanning multiple potential grouped actors. Notes are used
    to highlight this situation.
</p>
<p>Section 1.5 describes some optional groupings that may be of interest for security considerations and section
    1.6 describes some optional groupings in other related profiles.
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>ORF Actor
            </th>
            <th>Actor to be grouped with
            </th>
            <th>Reference
            </th>
            <th>Content Bindings Reference
            </th>
        </tr>
        <tr>
            <td>Questionnaire Filler
            </td>
            <td>Questionnaire Receiver
            </td>
            <td>1.1
            </td>
            <td>Volume 3
            </td>
        </tr>
        <tr>
            <td>Questionnaire Receiver
            </td>
            <td>Questionnaire Filler
            </td>
            <td>1.1
            </td>
            <td>Volume 3
            </td>
        </tr>
        <tr>
            <td>Questionnaire Processor
            </td>
            <td>Questionnaire Manager
                <p>Questionnaire Receiver
                </p>
                <p>Questionnaire Filler
                </p>
            </td>
            <td>1.1
            </td>
            <td>Volume 3
            </td>
        </tr>
        <tr>
            <td>Questionnaire Filler
            </td>
            <td>CT Time Client
            </td>
            <td>ITI TF-1: 7.1
            </td>
            <td>na
            </td>
        </tr>
        <tr>
            <td>Questionnaire Receiver
            </td>
            <td>CT Time Client
            </td>
            <td>ITI TF-1: 7.1
            </td>
            <td>na
            </td>
        </tr>
        <tr>
            <td>Questionnaire Processor
            </td>
            <td>CT Time Client
            </td>
            <td>ITI TF-1: 7.1
            </td>
            <td>na
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table5_7-0" class="reference"><a href="#cite_note-Table5-7">&#91;Table 5&#93;</a></sup><i>ORF
        - Required Actor Groupings</i>
</p>
<h2><span class="mw-headline" id="ORF_Overview">ORF Overview</span></h2>
<h3><span class="mw-headline" id="Use_Cases">Use Cases</span></h3>
<h4><span id="Use_Case_#1:_Questionnaire_Creation"></span><span class="mw-headline" id="Use_Case_.231:_Questionnaire_Creation">Use
        Case #1: Questionnaire Creation</span></h4>
<h5><span class="mw-headline" id="Questionnaire_Creation_Use_Case_Description">Questionnaire Creation Use Case
        Description</span></h5>
<p>The national radiological society has launched the UOR Program, a nationwide initiative to make ordering and
    referrals easier by means of Unified Ordering an Referral (UOR). The author of a new referral form defines a
    new Questionnaire Resource for a specific radiological examination (e.g. MRI). He does this with an application
    which acts as a Questionnaire Creator Actor. The author decides to query first already existing questionnaires,
    and retrieves one close to that what the new Questionnaire should represent. The author edits this
    Questionnaire and stores the result back to the Questionnaire Manager.
</p>
<h5><span class="mw-headline" id="Questionnaire_Creation_Process_Flow">Questionnaire Creation Process Flow</span></h5>
<p><a href="assets/images/ChOrfQuestionnaireCreationProcess.svg"" class=" image"><img src="assets/images/ChOrfQuestionnaireCreationProcess.svg" /></a></p>
<p><sup id="cite_ref-Figure2_8-0" class="reference"><a href="#cite_note-Figure2-8">&#91;Figure 2&#93;</a></sup> <i>Questionnaire
        Creation Process Flow</i>
</p>
<p>The Questionnaire Manager Actor supports two tasks in the Questionnaire Creation Process:
</p>
<ol>
    <li>It acts as a repository for Questionnaire Resources and allows query and retrieve transactions with regard
        existing resources. The Store Questionnaire Transaction allows for storing new questionnaires.</li>
    <li>It allows for further processing in terms of assembling bundles and creating new resources as determined by
        the Questionnaire Resource.</li>
</ol>
<h5><span class="mw-headline" id="Questionnaire_Deployment_Process_Flow">Questionnaire Deployment Process Flow</span></h5>
<p><a href="assets/images/ChOrfQuestionnaireDeploymentProcessFlow.svg" class="image"><img src="assets/images/ChOrfQuestionnaireDeploymentProcessFlow.svg" />
    </a>
</p>

<p><sup id="cite_ref-Figure3_9-0" class="reference"><a href="#cite_note-Figure3-9">&#91;Figure 3&#93;</a></sup> <i>Questionnaire
        Deployment Process Flow</i>
</p>
<p>The radiology service S-U-P-E-R-XR joins the UOR program. The service owns an application acting as a
    Questionnaire Processor Actor which fulfills the following tasks.
</p>
<ol>
    <li>It queries periodically the Questionnaire Manager of the national radiology society in order to provide
        always the newest versions of questionnaires to the referring doctors.</li>
    <li>It populates elements such as the recipient name, telco and address with the data of S-U-P-E-R-XR.</li>
    <li>Upon request by a referring doctor, it provides the questionnaire for the required order or referral (see
        section Questionnaire Usage Process Flow)</li>
</ol>
<h5><span class="mw-headline" id="Questionnaire_Usage_Process_Flow">Questionnaire Usage Process Flow</span></h5>
<p>Dr. Miller has a new Patient John Doe who has had an MRI at the radiology service “S-U-P-E-R-XR”. Dr. Miller
    retrieves a special order questionnaire from the Questionnaire Manager at S-U-P-E-R-XR which allows ordering of
    images and reports of previous exams. Dr. Miller fills in this questionnaire and sends it back. At
    S-U-P-E-R-XR, a staff member will fill in another Questionnaire with a reply, attaches images and reports an
    sends all to Dr. Miller.
</p>
<p><a href="assets/images/ChOrfQuestionnaireUsageProcessFlow.svg" class="image"><img src="assets/images/ChOrfQuestionnaireUsageProcessFlow.svg" /></a></p>

</p>
<h2><span class="mw-headline" id="ORF_Security_Considerations">ORF Security Considerations</span></h2>
<p>A resource server should not return any patient information unless proper authentication and communications
    security have been proven.
</p>
<p>There are many reasonable methods of securing interoperability transactions. These security models can be
    layered in without modifying the characteristics of the ORF Profile transactions. The use of TLS is mandatory.
</p>
<p>User authentication on mobile devices is encouraged using Internet User Authorization (IUA) Profile. The network
    communication security and user authentication are layered in at the HTTP transport layer and do not modify the
    interoperability characteristics defined in the ORF Profile.
</p>
<p>The Security Audit logging (e.g., ATNA) is recommended. Support for ATNA-based audit logging on the mobile
    health device may be beyond the ability of this constrained environment.
</p>
<p>In case vendors decide to include the Patient ID (patient.identifier) as a query parameter on the Resource URL
    (what would be out of the scope of ORF Implementation Guide), this URL pattern would present a risk when using
    typical web server audit logging of URL requests, and browser history. In both of these cases the URL with the
    patient identity would be clearly visible. These risks should be mitigated in system or operational design.
</p>
<h1><span id="Volume_2_–_Transactions"></span><span class="mw-headline" id="Volume_2_.E2.80.93_Transactions">Volume
        2 – Transactions</span></h1>
<h2><span id="Query_Questionnaire_[CH:ORF-1]"></span><span class="mw-headline" id="Query_Questionnaire_.5BCH:ORF-1.5D">Query
        Questionnaire [CH:ORF-1]</span></h2>
<p>This section corresponds to Transaction CH:ORF-1. Transaction CH:ORF-1 is used by the Questionnaire Creator,
    Questionnaire Manager and Questionnaire Filler. See also <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/sdc-form-manager.html#search">SDC
        Form Manager Questionnaire Search</a>.
</p>
<h3><span class="mw-headline" id="Scope">Scope</span></h3>
<p>This transaction is used by the the Questionnaire Creator, Questionnaire Manager and Questionnaire Filler to
    solicit information about questionnaires whose data match data provided in the query parameters on the request.
    The request is received by the Questionnaire Manager. The Questionnaire Manager processes the request and
    returns a response with the matching questionnaires.
</p>
<h3><span class="mw-headline" id="Actor_Roles">Actor Roles</span></h3>
<p><a href="assets/images/ChOrfActorsRoleQueryRetrieve.svg" class="image"><img src="assets/images/ChOrfActorsRoleQueryRetrieve.svg" /></a></p>

</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actor:
            </th>
            <th>Questionnaire Creator
            </th>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that create new Questionnaires, based on existing ones if appropriate. In order to allow
                the latter, the Questionnaire Creator must query the Questionnaire Manager and retrieve suitable
                questionnaires.
            </td>
        </tr>
        <tr>
            <td>Actor:
            </td>
            <td>Questionnaire Manager
            </td>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that provides Questionnaires. In addition the Questionnaire Manager can process
                questionnaires in terms of population of elements, creating of resources and bundles as needed. A
                Questionnaire Manager may also query other Questionnaire Managers (e .g. one of an authority
                responsible for the management of Questionnaires in a certain domain) and retrieve suitable
                questionnaires.
            </td>
        </tr>
        <tr>
            <td>Actor:
            </td>
            <td>Questionnaire Filler
            </td>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that allows querying a Questionnaire Manager for a Questionnaire in order to fill in the
                elements for submission.
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table6_12-0" class="reference"><a href="#cite_note-Table6-12">&#91;Table 6&#93;</a></sup><i>Actor
        Roles</i>
</p>
<h3><span class="mw-headline" id="Referenced_Standards">Referenced Standards</span></h3>
<table class="doc">
    <tbody>
        <tr>
            <td>HL7 FHIR
            </td>
            <td>Fast Healthcare Interoperability Resources <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/index.html">http://hl7.org/fhir/r4/index.html</a>
            </td>
        </tr>
        <tr>
            <td>HL7 SDC IG
            </td>
            <td>Structured Data Capture Implementation Guide <a rel="nofollow" class="external free" href="http://build.fhir.org/ig/HL7/sdc/index.html">http://build.fhir.org/ig/HL7/sdc/index.html</a>
            </td>
        </tr>
        <tr>
            <td>IETF RFC 2616
            </td>
            <td>Hypertext Transfer Protocol – HTTP/1.1
            </td>
        </tr>
        <tr>
            <td>IETF RFC 7540
            </td>
            <td>Hypertext Transfer Protocol – HTTP/2
            </td>
        </tr>
        <tr>
            <td>IETF RFC 3986
            </td>
            <td>Uniform Resource Identifier (URI): Generic Syntax
            </td>
        </tr>
        <tr>
            <td>IETF RFC 4627
            </td>
            <td>The application/json Media Type for JavaScript Object Notation (JSON)
            </td>
        </tr>
        <tr>
            <td>IETF RFC 6585
            </td>
            <td>Additional HTTP Status Codes
            </td>
        </tr>
        <tr>
            <td>IHE Appendix on HL7 FHIR
            </td>
            <td><a rel="nofollow" class="external free" href="https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf">https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf</a>
            </td>
        </tr>
    </tbody>
</table>
<h3><span class="mw-headline" id="Interaction_Diagram">Interaction Diagram</span></h3>
<p><a href="assets/images/ChOrfInteractionDiagramQueryRetrieve.svg" class="image"><img src="assets/images/ChOrfInteractionDiagramQueryRetrieve.svg" /></a></p>

</p>
<h4><span class="mw-headline" id="Query_Questionnaire_Resource_Request">Query Questionnaire Resource Request</span></h4>
<p>Query Questionnaire Resource Request represents an HTTP GET parameterized query from the Questionnaire
    Creator/Filler/Manager to the Questionnaire Manager.
</p>
<h5><span class="mw-headline" id="Trigger_Events">Trigger Events</span></h5>
<p>When a Questionnaire Creator/Filler/Manager needs to select a questionnaire based on information about
    questionnaires whose information matches a minimal set of known data, it issues a Query Questionnaire Resource
    request.
</p>
<h5><span class="mw-headline" id="Message_Semantics">Message Semantics</span></h5>
<p>The Query Questionnaire Resource request is conducted by the Questionnaire Creator/Filler/Manager by executing
    an HTTP GET against the Questionnaire Manager Questionnaire Resource URL.
</p>
<p>The search target follows the FHIR http specification, addressing the Questionnaire Resource type <a rel="nofollow"
        class="external free" href="http://hl7.org/fhir/http.html">http://hl7.org/fhir/http.html</a>:
</p>
<p><code>GET [base]/[type]{?[parameters]{&amp;_format=[mime-type]}}</code>
</p>
<p>This URL is configurable by the Questionnaire Manager and is subject to the following constraints.
</p>
<p>The [parameters] represents a series of encoded name-value pairs representing the filter for the query specified
    in the next section, as well as control parameters to modify the behavior of the Questionnaire Manager such as
    response format, or pagination.
</p>
<h6><span class="mw-headline" id="Query_Search_Parameters">Query Search Parameters</span></h6>
<p>The Questionnaire Creator/Filler/Manager may supply and the Questionnaire Manager shall be capable of processing
    all query parameters listed below. See <a rel="nofollow" class="external free" href="http://hl7.org/implement/standards/fhir/http.html#mime-type">http://hl7.org/implement/standards/fhir/http.html#mime-type</a>
    for details on encoding.
</p>
<p>Questionnaire Managers may choose to support additional query parameters beyond the subset listed below. Such
    parameters are considered out of scope for this transaction.
</p>
<p><b>_id Search Parameter</b>
</p>
<blockquote>
    <p>This parameter of type <code>string</code>, when supplied, represents the resource identifier for the
        Questionnaire Resource being queried. See IHE Appendix on HL7 FHIR Z.2.3 for use of the code&gt;string data
        type. Note: A search using _id is always an exact match search.
    </p>
</blockquote>
<p><b>code Search Parameter</b>
</p>
<blockquote>
    <p>This parameter of type <code>token</code> when supplied, specifies a code that corresponds to the
        questionnaire or one of its groups whose information is being queried. See IHE Appendix on HL7 FHIR Z.2.2
        for use of the <code>token</code> data type.
    </p>
</blockquote>
<p><b>identifier Search Parameters</b>
</p>
<blockquote>
    <p>This repeating parameter of type <code>token</code>, when supplied, specifies an identifier associated with
        the questionnaire whose information is being queried (e.g., a local identifier, account identifier, etc.).
        See IHE Appendix on HL7 FHIR Z.2.2 for use of the <code>token</code> data type.
    </p>
</blockquote>
<p><b>publisher Search Parameter</b>
</p>
<blockquote>
    <p>This parameter of type <code>string</code>, when supplied, specifies the author of the questionnaire whose
        information is being queried. For details on matching rules see IHE Appendix on HL7 FHIR Z.2.3.
    </p>
</blockquote>
<p><b>status Search Parameter</b>
</p>
<blockquote>
    <p>This parameter of type <code>token</code>, when supplied, specifies a code that corresponds to the status of
        the questionnaire. See IHE Appendix on HL7 FHIR Z.2.2 for use of the <code>token</code> data type.
    </p>
</blockquote>
<p><b>title Search Parameter</b>
</p>
<blockquote>
    <p>This parameter of type <code>string</code>, when supplied, specifies all or part of the name of the
        questionnaire (title for the root group of the questionnaire) whose information is being queried. For
        details on matching rules see IHE Appendix on HL7 FHIR Z.2.3.
    </p>
</blockquote>
<p><b>version Search Parameter</b>
</p>
<blockquote>
    <p>This parameter of type <code>string</code> when supplied, specifies the business version of the
        questionnaire whose information is being queried. For details on matching rules see IHE Appendix on HL7
        FHIR Z.2.3 .
    </p>
</blockquote>
<h6><span class="mw-headline" id="Populating_Expected_Response_Format">Populating Expected Response Format</span></h6>
<p>The FHIR standard provides encodings for responses as either XML or JSON. Questionnaire Manager Actors shall
    support both message encodings, whilst Questionnaire Creator/Filler/Manager Actors shall support one and may
    support both.
</p>
<p>See IHE Appendix on HL7 FHIR Z.6 for details.
</p>
<h5><span class="mw-headline" id="Expected_Actions">Expected Actions</span></h5>
<p>The Questionnaire Manager shall return questionnaire resources that reflect the match to all of the search
    criteria provided by the Questionnaire Creator/Filler/Manager. The Questionnaire Manager shall respond with a
    Query Questionnaire Resource Response synchronously (i.e., on the same connection as was used to initiate the
    request).
</p>
<p>If the Questionnaire Creator/Filler/Manager supplied a query parameter, or used a query parameter modifier which
    the Questionnaire Manager is not capable of utilizing, then the Questionnaire Manager shall respond with an <b>HTTP
        400</b> (Bad request) status code and an <code>OperationOutcome</code> resource indicating the parameters
    in error.
</p>
<p>The Questionnaire Manager shall respond to the query request as described by the following cases with a Query
    Questionnaire Resource Response and shall behave according to the cases listed below:
</p>
<p><b>Case 1:</b> The Questionnaire Manager finds at least one questionnaire resource matching the criteria sent as
    HTTP query parameters.
</p>
<p><b>HTTP 200</b> (OK) is returned as the HTTP status code.
</p>
<p>A Resource Bundle is returned representing the result set. The Questionnaire Manager populates the <code>total</code>
    property of the bundle with the total number of matching results. One <code>entry</code> is returned from the
    Questionnaire Manager for each Questionnaire Resource found.
</p>
<p><b>Case 2:</b> The Questionnaire Manager fails to find in its information source, any questionnaire resource
    matching the criteria sent as HTTP query parameters.
</p>
<p><b>HTTP 200</b> (OK) is returned as the HTTP status code.
</p>
<p>A Resource Bundle is returned representing the zero result set. The Questionnaire Manager populates the <code>total</code>
    with a value of 0 indicating no results were found. No <code>entry</code> attributes are provided in the
    result.
</p>
<p><b>Case 3:</b> The Questionnaire Manager is not capable of producing a response in the requested format
    specified by <code>_format</code> parameter
</p>
<p><b>HTTP 406</b> (Not Acceptable) is returned as the HTTP status code.
</p>
<p>An OperationOutcome Resource is returned indicating that the requested response format is not supported in an
    <code>issue</code> having:
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Attribute
            </th>
            <th>Value
            </th>
        </tr>
        <tr>
            <td>severity
            </td>
            <td>error
            </td>
        </tr>
        <tr>
            <td>code
            </td>
            <td>{<a rel="nofollow" class="external free" href="http://hl7.org/fhir/issue-type.html">http://hl7.org/fhir/issue-type.html</a>,
                ,not-supported}
            </td>
        </tr>
    </tbody>
</table>
<p>The Questionnaire Manager may be capable of servicing requests for response formats not listed, but shall, at
    minimum, be capable of producing XML and JSON encodings.
</p>
<p>The Questionnaire Manager may return other HTTP status codes to represent specific error conditions. When HTTP
    error status codes are returned by the Questionnaire Manager, they shall conform to the HTTP standard RFC 2616.
    Their use is not further constrained or specified by this transaction.
</p>
<h4><span class="mw-headline" id="Query_Questionnaire_Resource_Response">Query Questionnaire Resource Response</span></h4>
<h5><span class="mw-headline" id="Trigger_Events_2">Trigger Events</span></h5>
<p>The Questionnaire Manager found questionnaires matching the query parameters specified by the Questionnaire
    Creator/Filler/Manager as a result of a Query Questionnaire Resource Request.
</p>
<h5><span class="mw-headline" id="Message_Semantics_2">Message Semantics</span></h5>
<p>The Query Questionnaire Resource Response is sent from the Questionnaire Manager to the Questionnaire
    Creator/Filler/Manager as a Bundle of Questionnaire Resources. The “content-type” of the response will depend
    upon the requested response format indicated by the Questionnaire Creator/Filler/Manager.
</p>
<p>See IHE Appendix on HL7 FHIR Z.6 for more details on response format handling and Z.7 for handling guidance for
    Access Denied.
</p>
<h6><span class="mw-headline" id="Questionnaire_Resource_Definition_in_the_Context_of_Query_Questionnaire_Resource_Response">Questionnaire
        Resource Definition in the Context of Query Questionnaire Resource Response</span></h6>
<p>The components of the Questionnaire Resource with cardinality greater than 0 (as shown below) are required, and
    the detailed description is provided here. All other attributes of the response are optional.<br />
    The Questionnaire Resource contained within the Query Questionnaire Resource Response is described at <a rel="nofollow"
        class="external free" href="http://hl7.org/fhir/questionnaire.html">http://hl7.org/fhir/questionnaire.html</a>.
    The Questionnaire Resource shall follow the rules according to
    <a rel="nofollow" class="external free" href="http://fhir.ch/ig/ch-orf/StructureDefinition/ORFQuestionnaireProfile">http://fhir.ch/ig/ch-orf/StructureDefinition/ORFQuestionnaireProfile</a>
    Profile. See Content Volume 3 for profile description.
</p>
<h6><span class="mw-headline" id="Resource_Bundling">Resource Bundling</span></h6>
<p>Please see IHE Appendix on HL7 FHIR Z.1 for details on the IHE guidelines for implementing FHIR bundles.
</p>
<h5><span class="mw-headline" id="Conformance_Resource">Conformance Resource</span></h5>
<p>Questionnaire Managers implementing [CH:ORF-1] should provide a Conformance Resource as described in IHE
    Appendix on HL7 FHIR Z.4 indicating the query operation for the Questionnaire Resource has been implemented and
    shall include all query parameters implemented for the Questionnaire Resource.
</p>
<h4><span class="mw-headline" id="Retrieve_Questionnaire_Resource_Request">Retrieve Questionnaire Resource Request</span></h4>
<p>The Retrieve Questionnaire Resource Request represents an HTTP GET from the Questionnaire Creator/Filler/Manager
    to the Questionnaire Manager and provides a mechanism for retrieving a single Questionnaire Resource with a
    known resource identifier.
</p>
<h5><span class="mw-headline" id="Trigger_Events_3">Trigger Events</span></h5>
<p>When the Questionnaire Creator/Filler/Manager possesses a Questionnaire Resource’s identifier (either through
    query, database lookup, or other mechanism) for which it requires additional or new information, it issues a
    Retrieve Questionnaire Resource operation.
</p>
<h5><span class="mw-headline" id="Message_Semantics_3">Message Semantics</span></h5>
<p>The Retrieve Questionnaire Resource is conducted by executing an HTTP GET against the Questionnaire Manager’s
    Questionnaire Resource URL, providing the resource id of the Questionnaire being retrieved. The target is
    formatted as:
</p>
<p><code>GET [base]/Questionnaire/[resourceId]</code>
</p>
<p>The Questionnaire Manager shall respond to this query by sending a single Questionnaire Resource instance.
</p>
<h5><span class="mw-headline" id="Expected_Actions_2">Expected Actions</span></h5>
<p>The Questionnaire Manager shall retrieve the Questionnaire by the Resource identifier on the HTTP GET supplied
    by the Questionnaire Creator/Filler/Manager. The Questionnaire Manager shall respond to the retrieve request as
    described by the following cases:
</p>
<p><b>Case 1:</b> The Questionnaire Manager finds in its information source the Questionnaire matching the <code>resourceId</code>
    sent in the HTTP request.
</p>
<p><b>HTTP 200</b> (OK) is returned as the HTTP status code.
</p>
<p>A Questionnaire Resource is returned representing the result.
</p>
<p><b>Case 2:</b> The Questionnaire Manager fails to find in its information source the Questionnaire matching the
    <code>resourceId</code> sent in the HTTP request.
</p>
<p><b>HTTP 404</b> (Not Found) is returned as the HTTP status code
</p>
<p>An <code>OperationOutcome</code> Resource is returned indicating that the Patient Resource could not be found:
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Attribute
            </th>
            <th>Value
            </th>
        </tr>
        <tr>
            <td>severity
            </td>
            <td>error
            </td>
        </tr>
        <tr>
            <td>type
            </td>
            <td>{<a rel="nofollow" class="external free" href="http://hl7.org/fhir/vs/issue-type}not-found">http://hl7.org/fhir/vs/issue-type}not-found</a>
            </td>
        </tr>
    </tbody>
</table>
<p>The Questionnaire Manager may return other HTTP status codes to represent specific error conditions. When HTTP
    error status codes are returned by the Questionnaire Manager, they shall conform to the HTTP standard RFC 2616.
    Their use is not further constrained or specified by this transaction.
</p>
<h4><span class="mw-headline" id="Retrieve_Questionnaire_Resource_Response">Retrieve Questionnaire Resource
        Response</span></h4>
<p>The Questionnaire Manager’s response to a successful Questionnaire Retrieve shall be an <b>HTTP 200</b> (OK)
    Status code with a FHIR Questionnaire Resource, or an appropriate error code.
</p>
<h5><span class="mw-headline" id="Trigger_Events_4">Trigger Events</span></h5>
<p>The Questionnaire Manager found a questionnaire matching the Resource identifier specified by the Questionnaire
    Creator/Filler/Manager.
</p>
<h5><span class="mw-headline" id="Message_Semantics_4">Message Semantics</span></h5>
<p>The Retrieve Questionnaire Resource response is sent from the Questionnaire Manager to the Questionnaire
    Creator/Filler/Manager as a single Questionnaire Resource. See <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/questionnaire.html">http://hl7.org/fhir/r4/questionnaire.html</a>
    for details on this resource.
</p>
<p>See IHE Appendix on HL7 FHIR Z.6 for more details on response format handling and Z.7 for handling guidance for
    Access Denied.
</p>
<p>If the Questionnaire Manager is unable to produce a response in the requested format, it shall respond with an
    <b>HTTP 400</b> error indicating that it was unable to fulfill the request. The Questionnaire Manager may be
    capable of servicing requests for response formats not listed, but shall, at minimum, be capable of producing
    XML and JSON encodings.
</p>
<h6><span class="mw-headline" id="Questionnaire_Resource_Definition_in_the_Context_of_Retrieve_Questionnaire_Resource_Response">Questionnaire
        Resource Definition in the Context of Retrieve Questionnaire Resource Response</span></h6>
<p>The Questionnaire Resource definition in the context of a retrieve operation is identical to the constraints
    placed on the Questionnaire Resource for a search.
</p>
<p>For the complete FHIR definition of this Resource, see <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/questionnaire.html">http://hl7.org/fhir/r4/questionnaire.html</a>.
</p>
<h2><span id="Store_Questionnaire_[CH:ORF-2]"></span><span class="mw-headline" id="Store_Questionnaire_.5BCH:ORF-2.5D">Store
        Questionnaire [CH:ORF-2]</span></h2>
<p>This section corresponds to Transaction CH:ORF-2. Transaction CH:ORF-2 is used by the Questionnaire Creator and
    Questionnaire Manager. See also <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/sdc-form-manager.html#rest-behavior">SDC
        Form Manager REST behavior</a>.
</p>
<h3><span class="mw-headline" id="Scope_2">Scope</span></h3>
<p>Transaction CH:ORF-2 is used by the Questionnaire Creator to store a questionnaire in the Questionnaire Manager.
</p>
<h3><span class="mw-headline" id="Actor_Roles_2">Actor Roles</span></h3>
<p><a href="assets/images/ChOrfActorsRoleStore.svg" class="image"><img src="assets/images/ChOrfActorsRoleStore.svg" /></P>
<p><sup id="cite_ref-Figure7_14-0" class="reference"><a href="#cite_note-Figure7-14">&#91;Figure 7&#93;</a></sup>
    <i>Use Case Diagram</i>
</p>
<p>Table 3.2.2-1: Actor Roles
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actor:
            </th>
            <th>Questionnaire Creator
            </th>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that creates new Questionnaires.
            </td>
        </tr>
        <tr>
            <td>Actor:
            </td>
            <td>Questionnaire Manager
            </td>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that provides Questionnaires. In addition the Questionnaire Manager can process
                questionnaires in terms of population of elements, creating of resources and bundles as needed.
                A
                Questionnaire Manager may also query other Questionnaire Managers (e .g. one of an authority
                responsible for the management of Questionnaires in a certain domain) and retrieve suitable
                questionnaires.
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table7_15-0" class="reference"><a href="#cite_note-Table7-15">&#91;Table 7&#93;</a></sup><i>Actor
        Roles</i>
</p>
<h3><span class="mw-headline" id="3.2.3_Referenced_Standards">3.2.3 Referenced Standards</span></h3>
<table class="doc">
    <tbody>
        <tr>
            <td>HL7 FHIR
            </td>
            <td>Fast Healthcare Interoperability Resources <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/index.html">http://hl7.org/fhir/r4/index.html</a>
            </td>
        </tr>
        <tr>
            <td>HL7 SDC IG
            </td>
            <td>Structured Data Capture Implementation Guide <a rel="nofollow" class="external free" href="http://build.fhir.org/ig/HL7/sdc/index.html">http://build.fhir.org/ig/HL7/sdc/index.html</a>
            </td>
        </tr>
        <tr>
            <td>IETF RFC 2616
            </td>
            <td>Hypertext Transfer Protocol – HTTP/1.1
            </td>
        </tr>
        <tr>
            <td>IETF RFC 7540
            </td>
            <td>Hypertext Transfer Protocol – HTTP/2
            </td>
        </tr>
        <tr>
            <td>IETF RFC 3986
            </td>
            <td>Uniform Resource Identifier (URI): Generic Syntax
            </td>
        </tr>
        <tr>
            <td>IETF RFC 4627
            </td>
            <td>The application/json Media Type for JavaScript Object Notation (JSON)
            </td>
        </tr>
        <tr>
            <td>IETF RFC 6585
            </td>
            <td>Additional HTTP Status Codes
            </td>
        </tr>
        <tr>
            <td>IHE Appendix on HL7 FHIR
            </td>
            <td><a rel="nofollow" class="external free" href="https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf">https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf</a>
            </td>
        </tr>
    </tbody>
</table>
<h3><span class="mw-headline" id="Interaction_Diagram_2">Interaction Diagram</span></h3>
<p><a href="assets/images/ChOrfInteractionDiagramQueryStore.svg" class="image"><img src="assets/images/ChOrfInteractionDiagramQueryStore.svg" /></a></p>

</p>
<h4><span class="mw-headline" id="Store_Questionnaire_Resource_Request">Store Questionnaire Resource Request</span></h4>
<p>The Questionnaire Manager shall support the message semantics for create as defined at <a rel="nofollow" class="external free"
        href="http://hl7.org/fhir/r4/http.html#create">http://hl7.org/fhir/r4/http.html#create</a> as applicable to
    a Questionnaire Resource defined at <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/questionnaire.html">http://hl7.org/fhir/r4/questionnaire.html</a>.
    The Questionnaire Resource is further constrained by a profile, see in Volume 3.
</p>
<h5><span class="mw-headline" id="Trigger_Events_5">Trigger Events</span></h5>
<p>When a Questionnaire Creator needs to store a questionnaire it issues a Store Questionnaire Resource Request.
</p>
<h5><span class="mw-headline" id="Message_Semantics_5">Message Semantics</span></h5>
<p>A Questionnaire Creator initiates a create request as defined at <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/http.html#create">http://hl7.org/fhir/r4/http.html#create</a>
    on the Questionnaire Resource in order to store a new questionnaire. A Questionnaire Creator shall use either
    the XML or the JSON messaging formats as defined in FHIR. A Questionnaire Manager shall support receiving a
    request in both the JSON and the XML messaging formats as defined in FHIR. See IHE Appendix on HL7 FHIR Z.6 for
    more details.
</p>
<h5><span class="mw-headline" id="Expected_Actions_3">Expected Actions</span></h5>
<p>The Questionnaire Manager shall issue a Store Questionnaire Response upon validation of a received Questionnaire
    Resource Request. See next Section. The Questionnaire Manager shall respond with appropriate HTTP error codes
    as described at <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/http.html#create">http://hl7.org/fhir/r4/http.html#create</a>.
</p>
<h4><span class="mw-headline" id="Store_Questionnaire_Resource_response">Store Questionnaire Resource response</span></h4>
<p>The Questionnaire Manager uses the response semantics as appropriate according to the FHIR operation initiated
    by the Questionnaire Creator.
</p>
<h5><span class="mw-headline" id="Trigger_Events_6">Trigger Events</span></h5>
<p>A Questionnaire Manager sends a Store Questionnaire Resource response to the Questionnaire Creator upon
    validation of a received Store Questionnaire Resource request.
</p>
<h5><span class="mw-headline" id="Message_Semantics_6">Message Semantics</span></h5>
<p>The Questionnaire Manager shall respond with the appropriate response codes as defined at <a rel="nofollow" class="external free"
        href="http://hl7.org/fhir/r4/http.html#create">http://hl7.org/fhir/r4/http.html#create</a>.
</p>
<h5><span class="mw-headline" id="Expected_Actions_4">Expected Actions</span></h5>
<p>There are no additional actions required on Questionnaire Creator upon receipt of the Store Questionnaire
    Response.
</p>
<h4><span class="mw-headline" id="Conformance_Resource_2">Conformance Resource</span></h4>
<p>Questionnaire Manager implementing this transaction should provide a Conformance Resource as described in IHE
    Appendix on HL7 FHIR Z.3 indicating the operation has been implemented.
</p>
<h2><span id="Retrieve_Bundle_[CH:ORF-3]"></span><span class="mw-headline" id="Retrieve_Bundle_.5BCH:ORF-3.5D">Retrieve
        Bundle [CH:ORF-3]</span></h2>
<p>This section corresponds to Transaction CH:ORF-3. Transaction CH:ORF-3 is used by the Questionnaire Filler and
    Questionnaire Manager. This is an operation implementation as outlined in the SDC Workflow
    <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/workflow.html">4.2 EHR system
        requests populated QuestionnaireResponse</a>. TODO: Harmonize completely with SDC?
</p>
<h3><span class="mw-headline" id="Scope_3">Scope</span></h3>
<p>This transaction is used to retrieve a Bundle related to a specific Questionnaire.
</p>
<h3><span class="mw-headline" id="Actor_Roles_3">Actor Roles</span></h3>
<p><a href="assets/images/ChOrfActorsRoleRetrieveBundle.svg" class="image"><img src="assets/images/ChOrfActorsRoleRetrieveBundle.svg" /></a></p>

</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Actor:
            </th>
            <th>Questionnaire Filler
            </th>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that allows querying a Questionnaire Manager for a suitable Questionnaire. It then
                retrieves the corresponding Bundle. After completion of the Questionnaire, the Questionnaire Filler
                submits it.
            </td>
        </tr>
        <tr>
            <td>Actor:
            </td>
            <td>Questionnaire Manager
            </td>
        </tr>
        <tr>
            <td>Role:
            </td>
            <td>A system that provides Questionnaires. In addition the Questionnaire Manager can process
                questionnaires in terms of population of elements, creating of resources and bundles as needed. A
                Questionnaire Manager may also query other Questionnaire Managers (e .g. one of an authority
                responsible for the management of Questionnaires in a certain domain) and retrieve suitable
                questionnaires.
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table8_18-0" class="reference"><a href="#cite_note-Table8-18">&#91;Table 8&#93;</a></sup><i>Actor
        Roles</i>
</p>
<h3><span class="mw-headline" id="Referenced_Standards_2">Referenced Standards</span></h3>
<table class="doc">
    <tbody>
        <tr>
            <td>HL7 FHIR
            </td>
            <td>Fast Healthcare Interoperability Resources <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/index.html">http://hl7.org/fhir/r4/index.html</a>
            </td>
        </tr>
        <tr>
            <td>HL7 SDC IG
            </td>
            <td>Structured Data Capture Implementation Guide <a rel="nofollow" class="external free" href="http://build.fhir.org/ig/HL7/sdc/index.html">http://build.fhir.org/ig/HL7/sdc/index.html</a>
            </td>
        </tr>
        <tr>
            <td>IETF RFC 2616
            </td>
            <td>Hypertext Transfer Protocol – HTTP/1.1
            </td>
        </tr>
        <tr>
            <td>IETF RFC 7540
            </td>
            <td>Hypertext Transfer Protocol – HTTP/2
            </td>
        </tr>
        <tr>
            <td>IETF RFC 3986
            </td>
            <td>Uniform Resource Identifier (URI): Generic Syntax
            </td>
        </tr>
        <tr>
            <td>IETF RFC 4627
            </td>
            <td>The application/json Media Type for JavaScript Object Notation (JSON)
            </td>
        </tr>
        <tr>
            <td>IETF RFC 6585
            </td>
            <td>Additional HTTP Status Codes
            </td>
        </tr>
        <tr>
            <td>IHE Appendix on HL7 FHIR
            </td>
            <td><a rel="nofollow" class="external free" href="https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf">https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf</a>
            </td>
        </tr>
    </tbody>
</table>
<h3><span class="mw-headline" id="Interaction_Diagram_3">Interaction Diagram</span></h3>
<p><a href="assets/images/ChOrfInteractionDiagramRetrieveBundle.svg" class="image"><img src="assets/images/ChOrfInteractionDiagramRetrieveBundle.svg" /></a></p>

</p>
<h4><span class="mw-headline" id="Retrieve_Bundle_Operation">Retrieve Bundle Operation</span></h4>
<p>The Questionnaire Manager shall support a retrieve Bundle operation on the Questionnaire Resource according to
    <a rel="nofollow" class="external free" href="https://www.hl7.org/fhir/operations.html">https://www.hl7.org/fhir/operations.html</a>.
</p>
<h5><span class="mw-headline" id="Trigger_Events_7">Trigger Events</span></h5>
<p>When a Questionnaire Filler needs a Questionnaire bundle it issues a retrieve Bundle operation.
</p>
<h5><span class="mw-headline" id="Message_Semantics_7">Message Semantics</span></h5>
<p>A Questionnaire Filler initiates a retrieve Bundle upon the Questionnaire Resource with the following operation
    request:
</p>
<p><code>[base]/Questionnaire/[id]/$retrieveBundle</code>
</p>
<p>The operation contains no parameters.
</p>
<h5><span class="mw-headline" id="Expected_Actions_5">Expected Actions</span></h5>
<p>The Questionnaire Manager shall create an empty document bundle according to the FHIR ORFDocumentProfile (see
    Volume 3). The <a rel="nofollow" class="external text" href="http://hl7.org/fhir/bundle.html">Bundle</a> is of
    <a rel="nofollow" class="external text" href="http://hl7.org/fhir/bundle-definitions.html#Bundle.type">type</a>
    &quot;document&quot; and has a <a rel="nofollow" class="external text" href="http://hl7.org/fhir/composition.html">Composition</a>
    resource as the first resource in the bundle, followed by a series of other resources, referenced from the
    Composition resource.
</p>
<h4><span class="mw-headline" id="Retrieve_Bundle_Response">Retrieve Bundle Response</span></h4>
<p>The Questionnaire Manager uses the response semantics as appropriate according to the FHIR operation initiated
    by the Questionnaire Filler.
</p>
<h5><span class="mw-headline" id="Trigger_Events_8">Trigger Events</span></h5>
<p>A Questionnaire Manager sends a Retrieve Bundle operation response to the Questionnaire Filler upon invoking the
    retrieveBundle operation.
</p>
<h5><span class="mw-headline" id="Message_Semantics_8">Message Semantics</span></h5>
<p>The Questionnaire Manager shall respond with the appropriate response codes as defined at <a rel="nofollow" class="external free"
        href="https://www.hl7.org/fhir/r4/operations.html">https://www.hl7.org/fhir/r4/operations.html</a>.
</p>
<h5><span class="mw-headline" id="Expected_Actions_6">Expected Actions</span></h5>
<p>After receiving the Bundle the Questionnaire Filler shall provide a User Interface/Visualization of the Bundle
    to the User so that he can add the information. After completing the form/questionnaire by the user, the
    Questionnaire Filler shall update the bundle and included resources in the bundle with the information provided
    by the User.
</p>
<h4><span class="mw-headline" id="Conformance_Resource_3">Conformance Resource</span></h4>
<p>Questionnaire Managers implementing this operation should provide a Conformance Resource as described in IHE
    Appendix on HL7 FHIR Z.3 indicating the operation has been implemented.
</p>
<h2><span id="Submit_Bundle_[CH:ORF-4]"></span><span class="mw-headline" id="Submit_Bundle_.5BCH:ORF-4.5D">Submit
        Bundle [CH:ORF-4]</span></h2>
<p>This section corresponds to Transaction CH:ORF-4. Transaction CH:ORF-4 is used by the Questionnaire Filler and
    Questionnaire Receiver. This is a combination of extracting resources outlined in the SDC Workflow
    <a rel="nofollow" class="external text" href="http://build.fhir.org/ig/HL7/sdc/workflow.html">10.1 Optional EHR
        extracts information from Questionnaire Response and/or 10.2 Optional Data repository extracts information
        from Questionnaire Response</a> and sending a Questionnaire Response. TODO: Harmonize completely with SDC?
</p>
<h3><span class="mw-headline" id="Scope_4">Scope</span></h3>
<p>This transaction is used to submit a filled in questionnaire together with required additional resources and
    attachments in a Bundle from a Questionnaire Filler to a Questionnaire Receiver.
</p>
<h3><span class="mw-headline" id="Actor_Roles_4">Actor Roles</span></h3>
<p><a href="assets/images/ChOrfActorsRoleSubmitBundle.svg" class="image"><img src="assets/images/ChOrfActorsRoleSubmitBundle.svg" /></a></p>

</p>
<table class="doc">
    <tbody>
        <tr>
            <th><b>Actor:</b>
            </th>
            <th>Questionnaire Filler
            </th>
        </tr>
        <tr>
            <td><b>Role:</b>
            </td>
            <td>A system that allows querying a Questionnaire Manager for a Questionnaire in order to fill in the
                elements. Upon completion, a corresponding bundle will be submitted to the Questionnaire Receiver.
            </td>
        </tr>
        <tr>
            <td><b>Actor:</b>
            </td>
            <td>Questionnaire Receiver
            </td>
        </tr>
        <tr>
            <td><b>Role:</b>
            </td>
            <td>A system that receives bundles and processes them compliant to the ORF Profile.
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table9_21-0" class="reference"><a href="#cite_note-Table9-21">&#91;Table 9&#93;</a></sup><i>Actor
        Roles</i>
</p>
<p><br />
</p>
<h3><span class="mw-headline" id="Referenced_Standard">Referenced Standard</span></h3>
<table class="doc">
    <tbody>
        <tr>
            <td>HL7 FHIR
            </td>
            <td>Fast Healthcare Interoperability Resources <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/index.html">http://hl7.org/fhir/r4/index.html</a>
            </td>
        </tr>
        <tr>
            <td>HL7 SDC IG
            </td>
            <td>Structured Data Capture Implementation Guide <a rel="nofollow" class="external free" href="http://build.fhir.org/ig/HL7/sdc/index.html">http://build.fhir.org/ig/HL7/sdc/index.html</a>
            </td>
        </tr>
        <tr>
            <td>IETF RFC 2616
            </td>
            <td>Hypertext Transfer Protocol – HTTP/1.1
            </td>
        </tr>
        <tr>
            <td>IETF RFC 7540
            </td>
            <td>Hypertext Transfer Protocol – HTTP/2
            </td>
        </tr>
        <tr>
            <td>IETF RFC 3986
            </td>
            <td>Uniform Resource Identifier (URI): Generic Syntax
            </td>
        </tr>
        <tr>
            <td>IETF RFC 4627
            </td>
            <td>The application/json Media Type for JavaScript Object Notation (JSON)
            </td>
        </tr>
        <tr>
            <td>IETF RFC 6585
            </td>
            <td>Additional HTTP Status Codes
            </td>
        </tr>
        <tr>
            <td>IHE Appendix on HL7 FHIR
            </td>
            <td><a rel="nofollow" class="external free" href="https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf">https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_Appx-Z.pdf</a>
            </td>
        </tr>
    </tbody>
</table>
<h3><span class="mw-headline" id="Interaction_Diagram_4">Interaction Diagram</span></h3>
<p><a href="assets/images/ChOrfInteractionDiagramSubmitBundle.svg" class="image"><img src="assets/images/ChOrfInteractionDiagramSubmitBundle.svg" /></a></p>

</p>
<h4><span class="mw-headline" id="Submit_Bundle">Submit Bundle</span></h4>
<p>The transaction uses the HTTP POST method on the target Questionnaire Bundle endpoint to convey the
    questionnaire bundle as a FHIR transaction.
</p>
<h5><span class="mw-headline" id="Trigger_Events_9">Trigger Events</span></h5>
<p>After the Questionnaire is completed by the Questionnaire filler user, the Questionnaire Filler submits a the
    corresponding bundle to the Questionnaire receiver.
</p>
<h5><span class="mw-headline" id="Message_Semantics_9">Message Semantics</span></h5>
<p>The Questionnaire Manager shall initiate a FHIR “transaction” using a “create” action by sending an HTTP POST
    request method composed of a FHIR Bundle Resource containing the Composition resource and all resources
    referenced in, in particular one Questionnaire Resource, one QuestionnaireResponse Resource and additional
    resources according to the Questionnaire Profile.
</p>
<p>The media type of the HTTP body shall be either <code>“application/json+fhir”</code> or <code>“application/xml+fhir”</code>.
</p>
<p>See <a rel="nofollow" class="external free" href="http://hl7.org/fhir/http.html#transaction">http://hl7.org/fhir/http.html#transaction</a>
    for complete requirements of a transaction. See <a rel="nofollow" class="external free" href="http://hl7.org/fhir/bundle-transaction.html">http://hl7.org/fhir/bundle-transaction.html</a>
    for example of a transaction bundle.
</p>
<p>Submit Bundle is sent to the base URI as defined in FHIR. See <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/http.html">http://hl7.org/fhir/r4/http.html</a>
    for the definition of “http” access methods and “base”.
</p>
<h6><span class="mw-headline" id="Bundle_Resources">Bundle Resources</span></h6>
<p>For complete information on constructing a FHIR Bundle Resource, see: <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/bundle.html">http://hl7.org/fhir/r4/bundle.html</a>
</p>
<p>The FHIR <code>Bundle.meta.profile</code> shall include the value <code>“<a rel="nofollow" class="external free" href="http://fhir.ch/ig/ch-orf/StructureDefinition/ORFDocumentProfile”">http://fhir.ch/ig/ch-orf/StructureDefinition/ORFDocumentProfile”</a></code>.
</p>
<h5><span class="mw-headline" id="Expected_Actions_7">Expected Actions</span></h5>
<p>The Questionnaire Receiver shall accept both media types <code>application/json+fhir</code> and <code>application/xml+fhir</code>.
</p>
<p>On receipt of the submission, the Questionnaire Receiver shall validate the resources and respond with one of
    the HTTP codes defined in Section 3.4.4.2.2 Message Semantics.
</p>
<h4><span class="mw-headline" id="Status_Message">Status Message</span></h4>
<p>The Questionnaire receiver returns a HTTP Status code appropriate to the processing, conforming to the
    transaction specification requirements as specified in <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/http.html#transaction">http://hl7.org/fhir/r4/http.html#transaction</a>
</p>
<h5><span class="mw-headline" id="Trigger_Events_10">Trigger Events</span></h5>
<p>This message shall be sent once the questionnaire bundle is received and completely processed.
</p>
<h5><span class="mw-headline" id="Message_Semantics_10">Message Semantics</span></h5>
<p>When the Questionnaire Receiver has successfully processed the POST transaction, then the Questionnaire Receiver
    shall return an HTTP response with an overall status code.
</p>
<p>In order to allow the Questionnaire Filler to know the outcomes of processing the transaction, and the
    identities assigned to the resources by the Questionnaire Receiver, the Questionnaire Receiver shall return a
    Bundle, with type set to transaction-response, that contains one entry for each entry in the request, in the
    same order, with the outcome of processing the entry. See FHIR <a rel="nofollow" class="external free" href="http://hl7.org/fhir/r4/bundle.html#transaction-response">http://hl7.org/fhir/r4/bundle.html#transaction-response</a>
</p>
<p>Each entry element shall contain a response element which details the outcome of processing the entry - the HTTP
    status code. All other elements are not required.
</p>
<p>On success, the Questionnaire Receiver shall return the HTTP status code 200 – OK.
</p>
<p>Guidance on handling Access Denied related to use of 403 and 404 can be found in IHE Appendix on HL7 FHIR Z.7.
</p>
<p>On failure, the Questionnaire Receiver shall return the HTTP status codes as follows:
</p>
<ul>
    <li>400 Bad Request - resource could not be parsed or failed basic FHIR validation rules like reference
        inconsistencies, schema violations, etc.</li>
    <li>404 Not Found - resource type not supported.</li>
    <li>422 Unprocessable Entity - one or more proposed resources violated applicable FHIR profiles or server
        business rules.</li>
</ul>
<p>In addition, the Questionnaire Receiver may also send 5xx HTTP status codes to indicate non-transaction related
    failures. Note that the Questionnaire Filler may also encounter non-FHIR endpoints which will not return an
    Bundle in the response.
</p>
<p>The Questionnaire Receiver may return HTTP redirect responses (responses with HTTP status codes 301, 302, 303 or
    307) in response to a request.
</p>
<h5><span class="mw-headline" id="Expected_Actions_8">Expected Actions</span></h5>
<p>If the Questionnaire Receiver returns an HTTP redirect response (HTTP status codes 301, 302, 303, or 307), the
    Questionnaire Filler shall follow that redirection, although it may stop processing if it detects a loop.
</p>
<p>The Questionnaire Receiver processes the results according to application-defined rules.
</p>
<p>If a Questionnaire Receiver cannot automatically recover from an error condition, at a minimum, it should
    display the error to the user.
</p>
<h4><span class="mw-headline" id="Conformance_Resource_4">Conformance Resource</span></h4>
<p>Questionnaire Receiver implementing this transaction should provide a Conformance Resource as described in IHE
    Appendix on HL7 FHIR Z.3 indicating the operation has been implemented.
</p>
<h1><span id="Volume_3_–_Content_Modules"></span><span class="mw-headline" id="Volume_3_.E2.80.93_Content_Modules">Volume
        3 – Content Modules</span></h1>
<h2><span class="mw-headline" id="Questionnaire_Content">Questionnaire Content</span></h2>
<p>This section describes the content of a form. The following definitions apply:
</p>
<p>Request and responses consist of filled in questionnaires. Some elements of the questionnaire are mandatory
    given elements (such as author, data entry person, receiver etc. are always present in a questionnaire
    compliant to the ORF Implementation Guide. In addition, a questionnaire will contain elements which are use
    case specific. The ORF Implementation Guide makes no assumptions about the nature of such elements: structure
    and content (including coding of codes elements) are in the responsibility of those creating a form for a
    particular use case.
</p>
<p>As this Implementation Guide is based on FHIR, the following rules apply:
</p>
<p>Elements, grouping of elements, order of groups and order of elements within groups of a questionnaire shall be
    defined in a Questionnaire Resource. The Questionnaire Resource is defined by means of the Questionnaire
    Creator Actor.
</p>
<p>Based on the Questionnaire, a Questionnaire Manager Actor defines a QuestionnaireResponse and appropriate
    additional resources aimed at transmitting the information provided by the Questionnaire filler in a
    standardized structured form. In addition, the Questionnaire Manager shall create a QuestionnaireResponse
    Resource (based on the Questionnaire Resource), a Composition Resource. Upon completion of the questionnaire,
    the Questionnaire Manager shall create a bundle with all resources mentioned above.
</p>
<p>Questionnaires may be accompanied by additional material which can be attached or sent by postal mail (e.g.
    xray-films or paper documents). The use case may require some references between attached objects (e. g. which
    pdf-reports belongs to which imaging study).
</p>
<h2><span class="mw-headline" id="Mandatory_given_elements_of_a_questionnaire">Mandatory given elements of a
        questionnaire</span></h2>
<p>A questionnaire shall have a set of mandatory given elements (e.g. author, data entry person, receiver etc. <sup id="cite_ref-TableQ_23-0"
        class="reference"><a href="#cite_note-TableQ-23">&#91;Table 10&#93;</a></sup>
    lists the mandatory given elements
</p>
<table class="doc">
    <tbody>
        <tr>
            <th><b>Name</b>
            </th>
            <th colspan="2"><b>Role taker</b>
            </th>
            <th><b>HL 7 V3R<br /> Equivalent</b>
            </th>
            <th><b>FHIR<br /></b>
                <p>Representation<b></b>
                </p>
            </th>
            <th><b>Comment</b>
            </th>
        </tr>
        <tr>
            <th>
            </th>
            <th><b>Human</b>
            </th>
            <th><b>Organization</b>
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>
            </th>
        </tr>
        <tr>
            <td>Author
            </td>
            <td>X
            </td>
            <td>X
            </td>
            <td>Author
            </td>
            <td>Practitioner
            </td>
            <td>The person responsible for Form Content
            </td>
        </tr>
        <tr>
            <td>Date Entry Person
            </td>
            <td>X
            </td>
            <td>X
            </td>
            <td>DataEnterer
            </td>
            <td>Practitioner
            </td>
            <td>The person who has typed/filled in the Form Content.
            </td>
        </tr>
        <tr>
            <td>Urgent Notification Contact for this document
            </td>
            <td>X
            </td>
            <td>X
            </td>
            <td>PrimaryInformationRecipient
            </td>
            <td>Practitioner
            </td>
            <td>An information recipient to notify for urgent matters (e.g. in a radiology service, the Radiologist
                has to be called by phone right away at the time the images arrive.
            </td>
        </tr>
        <tr>
            <td>Urgent Notification Contact for the Response to this document
            </td>
            <td>X
            </td>
            <td>X
            </td>
            <td>PrimaryInformationRecipient
            </td>
            <td>Practitioner
            </td>
            <td>
                <p>An information recipient to notify for urgent matters about the response. (e.g. in a clinical
                    setting, the referring doctor has to be called by phone right away at the time the images and
                    reports arrive.
                </p>
                <p>The Urgent Notification Contact for the Response can be specified already in the request. At the
                    time the response is written, this element shall be populated to the Urgent Notification
                    Contact element in the response
                </p>
            </td>
        </tr>
        <tr>
            <td>Receiver
            </td>
            <td>X
            </td>
            <td>X
            </td>
            <td>
            </td>
            <td>Practitioner
            </td>
            <td>Person and/or institution who receives the Bundle
            </td>
        </tr>
        <tr>
            <td>Patient
            </td>
            <td>X
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Patient
            </td>
            <td>The principle target of a particular Form Content is one patient (for obstetrical and neonatal use
                cases see….).
            </td>
        </tr>
        <tr>
            <td>PrecedentDocumentId
            </td>
            <td>na
            </td>
            <td>na
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>This element provides a link to the preceding document in a thread (e.g. from a response to the
                request
            </td>
        </tr>
        <tr>
            <td>Date
            </td>
            <td>na
            </td>
            <td>na
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Date, the document was created
            </td>
        </tr>
        <tr>
            <td>Priority
            </td>
            <td>na
            </td>
            <td>na
            </td>
            <td>
            </td>
            <td>DiagnosticOrderPriority
            </td>
            <td>The priority shall be indicated in the one of the resources in the table “Optional given elements
                of a questionnaire”
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-TableQ_23-1" class="reference"><a href="#cite_note-TableQ-23">&#91;Table 10&#93;</a></sup><i>Mandatory
        given elements in Questionnaires compliant to the ORF Implementation Guide</i>
</p>
<h2><span id="Optional_given_elements_of_a_questionnaire_(One_of_them_shall_be_provided)"></span><span class="mw-headline"
        id="Optional_given_elements_of_a_questionnaire_.28One_of_them_shall_be_provided.29">Optional given elements
        of a questionnaire (One of them shall be provided)</span></h2>
<table class="doc">
    <tbody>
        <tr>
            <th>Resource
            </th>
            <th>Description
            </th>
        </tr>
        <tr>
            <td>ServiceRequest
            </td>
            <td>
            </td>
        </tr>
    </tbody>
</table>
<p>There may be the need to provide a linkage between a particular files or between a particular file and an
    imaging study (e.g. a link between a PDF-File containing a report and a DICOM study). Such links shall be
    expressed with a DocumentManifest as follows:
</p>
<table class="doc">
    <tbody>
        <tr>
            <th>Resource
            </th>
            <th colspan="3">Elements
            </th>
            <th>Description
            </th>
        </tr>
        <tr>
            <td>DocumentManifest
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>type
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>(e.g. LOINC 18748-4 for Diagnostic Imaging Study)
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>content
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>pAttachment
            </td>
            <td>
            </td>
            <td>Attachment
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>contentType
            </td>
            <td>Mime Type
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>data
            </td>
            <td>Data inline, base64ed (contains the file; e.g. a PDF-Report)
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>related
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>Reference (ImagingStudy)
            </td>
            <td>
            </td>
            <td>ImagingStudyResource provides StudyinstanceUID etc.
            </td>
        </tr>
    </tbody>
</table>
<h2><span class="mw-headline" id="FHIR_Representation">FHIR Representation</span></h2>
<p>FHIR depicts forms (questionnaires) in a Questionnaire Resource. A Questionnaire Resource can be conceived as an
    empty questionnaire where as the filled in questionnaire refers to the QuestionnaireResponse Resource.
    QuestionnaireResponse Resources are certainly structured but due to their flexibility in design not in a
    standardized manner. FHIR addresses this issue by means of its standardized resources.
</p>
<p>The Order &amp; Referral by Form Implementation Guide is based on two FHIR Resources profiles. For details on
    profiling FHIR see HL7 FHIR <a rel="nofollow" class="external free" href="http://www.hl7.org/fhir/profiling.html">http://www.hl7.org/fhir/profiling.html</a>.
    For details on FHIR resources and data-types see HL7 FHIR <a rel="nofollow" class="external free" href="http://hl7.org/fhir/">http://hl7.org/fhir/</a>.
</p>
<ol>
    <li>The Order &amp; Referral by Form Questionnaire (ORF) Implementation Guide defines the usage of the FHIR
        Questionnaire Resource within the Order &amp; Referral by Form. The Questionnaire Resource is an organized
        collection of questions intended to solicit information from patients, providers or other individuals
        involved in the healthcare domain. They may be simple flat lists of questions or can be hierarchically
        organized in groups and sub-groups, each containing questions. The Questionnaire defines the questions to
        be asked, how they are ordered and grouped and what the constraints are on the allowed answers. The results
        of a Questionnaire can be communicated using the QuestionnaireResponse resource (see <a rel="nofollow" class="external free"
            href="http://www.hl7.org/fhir/questionnaire.html">http://www.hl7.org/fhir/questionnaire.html</a>).</li>
    <li>The Order &amp; Referral by Form Document (ORF) Profile defines the usage of the FHIR Bundle within the
        Order &amp; Referral by Form (ORF) Implementation Guide. The ORFDocumentProfile consist of a FHIR document
        (bundle) that contains the results of a filled in Questionnaire (QuestionnaireResponse Resource) together
        with the structured resources which map all information filled in the questionnaire. The <a rel="nofollow"
            class="external text" href="http://hl7.org/fhir/bundle.html">Bundle</a> is of <a rel="nofollow" class="external text"
            href="http://hl7.org/fhir/bundle-definitions.html#Bundle.type">type</a> &quot;document&quot; and has a
        <a rel="nofollow" class="external text" href="http://hl7.org/fhir/composition.html">Composition</a>
        resource as the first resource in the bundle, followed by a series of other resources, referenced from the
        Composition resource. The bundle gathers all the content of the document into a single XML document which
        may be signed and managed as required. The resources include both human readable and computer processable
        sections. In addition, a bundle as defined in this profile shall include a CSS stylesheets and optionally
        it may include a signature.<br /><br />Any resource referenced directly in the Composition Resource shall
        be included in the bundle. Other resources that these referenced resources refer to shall also be included
        in the bundle. Including these additional resources will make the document bigger, but will save
        applications from needing to retrieve the linked resources.</li>
</ol>
<h3><span class="mw-headline" id="FHIR_Resources_Constraints">FHIR Resources Constraints</span></h3>
<p>This section lists FHIR resources where this profile provides additional information. Resources not listed here
    follow the specifications of FHIR. For details refer to <a rel="nofollow" class="external free" href="https://www.hl7.org/fhir/resourcelist.html">https://www.hl7.org/fhir/resourcelist.html</a>.
</p>
<h4><span class="mw-headline" id="Composition_resource">Composition resource</span></h4>
<table class="doc">
    <tbody>
        <tr>
            <th colspan="4">FHIR Composition Resource
            </th>
            <th>FHIR Type
            </th>
            <th colspan="2">ORF Constraint
            </th>
            <th>Notes
            </th>
        </tr>
        <tr>
            <th>Element
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>
            </th>
            <th>Cardinality
            </th>
            <th>Optionality
            </th>
            <th>
            </th>
        </tr>
        <tr>
            <td>text
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Narrative Text of the composition.
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFPrecedentDocument
            </td>
            <td>Identifier
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Identifier of the document which precedes this document in a thread.
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFDataEntryPerson
            </td>
            <td>Practitioner
            </td>
            <td>0..1
            </td>
            <td>O
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFUrgentNotificiationContactForRequest
            </td>
            <td>Practitioner
            </td>
            <td>0..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFUrgentNotificiationContactForResponse
            </td>
            <td>Practitioner
            </td>
            <td>0..1
            </td>
            <td>O
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFRequestReceiver
            </td>
            <td>Practitioner
            </td>
            <td>0..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFResponseReceiver
            </td>
            <td>Practitioner
            </td>
            <td>0..1
            </td>
            <td>O
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>extension
            </td>
            <td colspan="3">ORFVisitNumber
            </td>
            <td>Identifier
            </td>
            <td>0..1
            </td>
            <td>O
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>identifier
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Identifier
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Identifier for this composition.
            </td>
        </tr>
        <tr>
            <td>date
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>dateTime
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Composition editing time
            </td>
        </tr>
        <tr>
            <td>type
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Codeable<br />
                <p>Concept
                </p>
            </td>
            <td>1..1
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>class
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Codeable<br />
                <p>Concept
                </p>
            </td>
            <td>1..1
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>title
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>string
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Meaningful title
            </td>
        </tr>
        <tr>
            <td>status
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>code
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>subject
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Reference(Patient)
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>author
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Reference (Practitioner)
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>section
            </td>
            <td>
            </td>
            <td>
            </td>
            <td colspan="5">QA section must at least one of text, entries, or sub-sections.
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>title
            </td>
            <td>
            </td>
            <td>string
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>entry
            </td>
            <td>
            </td>
            <td>Reference (Questionnaire)
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Questionnaire
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Reference (QuestionnaireResponse)
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>QuestionnaireResponse
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Reference (ANY)
            </td>
            <td>0..n
            </td>
            <td>R
            </td>
            <td>
                <p>Additionally structured entries like ServieRequest
                </p>
            </td>
        </tr>
    </tbody>
</table>
<h4><span class="mw-headline" id="Questionnaire_resource">Questionnaire resource</span></h4>
<p>The intention of the ORF Implementation Guide is to provide a standardized representation of forms at sender and
    receiver site as well. This is achieved with the Questionnaire Resource, which defines representation of all
    elements for the user (with the help of a CCS) and user interaction as well (e.g. with drop down lists).
</p>
<p>This approach requires two things:
</p>
<ol>
    <li>Precise definition of all questions</li>
    <li>Mapping between elements of the Questionnaire Resource and the corresponding elements of the other
        resources in the bundle</li>
</ol>
<p>Both is achieved by assigning meaningful concepts to all elements concerned. For codes refer to Appendix A.
</p>
<p><br />
</p>
<table class="doc">
    <tbody>
        <tr>
            <th colspan="3" rowspan="2">FHIR Questionnaire<br /> Resource
            </th>
            <th>FHIR Type
            </th>
            <th colspan="2">ORF Constraint
            </th>
            <th rowspan="2">Notes
            </th>
        </tr>
        <tr>
            <th>
            </th>
            <th>Cardinality
            </th>
            <th>Optionality
            </th>
        </tr>
        <tr>
            <td>identifier
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>Identifier
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>version
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>string
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>status
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>code
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>group
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Root group: Groups may either contain questions or groups but not both
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>linkId
            </td>
            <td>
            </td>
            <td>string
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>group
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>0..*
            </td>
            <td>(R)
            </td>
            <td>Nested questionnaire group. Groups may either contain questions or groups but not both; there may
                be 1..* nested groups
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>question
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>0..*
            </td>
            <td>(R)
            </td>
            <td>.
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>linkId
            </td>
            <td>string
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>concept
            </td>
            <td>code
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>Concept that represents this question on a questionnaire: used for mapping to the corresponding
                elements in the other resources in the bundle.
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>text
            </td>
            <td>string
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>type
            </td>
            <td>code
            </td>
            <td>1..1
            </td>
            <td>R
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>required
            </td>
            <td>boolean
            </td>
            <td>0..1
            </td>
            <td>O
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>repeats
            </td>
            <td>boolean
            </td>
            <td>0..1
            </td>
            <td>O
            </td>
            <td>Whether the question can have multiple answers
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>A question must use either option or options, not both.
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>options
            </td>
            <td>Reference (ValueSet)
            </td>
            <td>0..1
            </td>
            <td>(R)
            </td>
            <td>Valueset containing permitted answers
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
            <td>option
            </td>
            <td>Coding
            </td>
            <td>0..*
            </td>
            <td>(R)
            </td>
            <td>Permitted answers
            </td>
        </tr>
    </tbody>
</table>
<p><sup id="cite_ref-Table15_24-0" class="reference"><a href="#cite_note-Table15-24">&#91;Table 11&#93;</a></sup><i>Content
        of the Questionnaire resource</i>
</p>
<h4><span class="mw-headline" id="QuestionnaireResponse_resource">QuestionnaireResponse resource</span></h4>
<p>The QuestionnaireResponse Resource depends of the definition of the Questionnaire Resource and is therefore use
    case specific. For
    deriving QuestionnaireResponse Resources from the Questionnaire Resources refer to <a rel="nofollow" class="external free"
        href="https://www.hl7.org/fhir/r4/questionnaireresponse.html">https://www.hl7.org/fhir/r4/questionnaireresponse.html</a>.
</p>
<p><br />